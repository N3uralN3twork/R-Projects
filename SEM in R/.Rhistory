+  age +  twoparenthome  + black + hispanic  + geography97 + SES + citizenship
'
##### End Highschool Model #####
fit2_gender <- cfa(HSModel, data = dataset, std.lv=TRUE, group="gender")
fitted(fit2_gender)
fit2_gender <- cfa(HSModel, data = dataset, std.lv=TRUE, group="gender")
summary(fit2_gender,standardized=TRUE, fit.measures = TRUE)
MSModel <- '
#######Latent
TRAUMACRIME =~ jail
+ victim + gunshotless12 + gunshot12to18
TRAUMAPOVERTY =~  unemployment + homeless
+ poverty1997 + poverty1998 + poverty 1999 + poverty2000 + poverty2001 + poverty2002
TRAUMAFAMILY =~ death + hospitalization + divorce
DELINQUENCY =~ juveniledestroyproperty + juvenilestealless
+ juvenilestealmore + juvenileotherproperty + juvenileattack + juvenileselldrugs
CRIME =~ adultgun + adultdestroyproperty + adultstealless + adultstealmore + adultotherproperty
+ adultattack + adultselldrugs
ELEMSCHOOL  =~ TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + DELINQUENCY
+ elementmiddledropout
+ elementarysuspend + middlesuspend
+ SES + citizenship
HIGHSCHOOL  =~
+ highdropout
+ highsuspend
+ SES
+ citizenship
#######Correlations
#TRAUMACRIME ~~ TRAUMAPOVERTY
#######Regressions
adultincarceration ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL + HIGHSCHOOL + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
HIGHSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL  + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
ELEMSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY  + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
'
fit3_gender <- cfa(MSModel, data = dataset, std.lv=TRUE, group="gender")
summary(fit3_gender, standardized=TRUE, fit.measures=TRUE)
fit3_gender <- cfa(MSModel, data=dataset, std.lv=TRUE, group="gender", orthogonal=TRUE)
summary(fit3_gender, standardized=TRUE, fit.measures=TRUE)
MSModel <- '
#######Latent
TRAUMACRIME =~ jail
+ victim + gunshotless12 + gunshot12to18
TRAUMAPOVERTY =~  unemployment + homeless
+ poverty1997 + poverty1998 + poverty 1999 + poverty2000 + poverty2001 + poverty2002
TRAUMAFAMILY =~ death + hospitalization + divorce
DELINQUENCY =~ juveniledestroyproperty + juvenilestealless
+ juvenilestealmore + juvenileotherproperty + juvenileattack + juvenileselldrugs
CRIME =~ adultgun + adultdestroyproperty + adultstealless + adultstealmore + adultotherproperty
+ adultattack + adultselldrugs
ELEMSCHOOL  =~ TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + DELINQUENCY
+ elementmiddledropout
+ elementarysuspend + middlesuspend
+ SES + citizenship
HIGHSCHOOL  =~
+ highdropout
+ highsuspend
+ SES
+ citizenship
#######Correlations
#TRAUMACRIME ~~ TRAUMAPOVERTY
#######Regressions
adultincarceration ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL + HIGHSCHOOL + juvenileincarceration + CRIME
+  age +  twoparenthome + gender + black + hispanic  + geography97 + SES + citizenship
HIGHSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL  + juvenileincarceration + CRIME
+  age +  twoparenthome + gender + black + hispanic  + geography97 + SES + citizenship
ELEMSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY  + juvenileincarceration + CRIME
+  age +  twoparenthome + gender + black + hispanic  + geography97 + SES + citizenship
'
##### End Middleschool Model #####
fit3_gender <- cfa(MSModel, data=dataset, std.lv=TRUE)
summary(fit3_gender, standardized=TRUE, fit.measures=TRUE)
##### End Middleschool Model #####
# Converges when you don't ask to compute by group
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data=dataset, std.lv=TRUE, group = "gender")
MSModel <- '
#######Latent
TRAUMACRIME =~ jail
+ victim + gunshotless12 + gunshot12to18
TRAUMAPOVERTY =~  unemployment + homeless
+ poverty1997 + poverty1998 + poverty 1999 + poverty2000 + poverty2001 + poverty2002
TRAUMAFAMILY =~ death + hospitalization + divorce
DELINQUENCY =~ juveniledestroyproperty + juvenilestealless
+ juvenilestealmore + juvenileotherproperty + juvenileattack + juvenileselldrugs
CRIME =~ adultgun + adultdestroyproperty + adultstealless + adultstealmore + adultotherproperty
+ adultattack + adultselldrugs
ELEMSCHOOL  =~ TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + DELINQUENCY
+ elementmiddledropout
+ elementarysuspend + middlesuspend
+ SES + citizenship
HIGHSCHOOL  =~
+ highdropout
+ highsuspend
+ SES
+ citizenship
#######Correlations
#TRAUMACRIME ~~ TRAUMAPOVERTY
#######Regressions
adultincarceration ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL + HIGHSCHOOL + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
HIGHSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL  + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
ELEMSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY  + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
'
fit3_gender <- cfa(MSModel, data=dataset, std.lv=TRUE, group = "gender")
MSModel <- '
#######Latent
TRAUMACRIME =~ jail
+ victim + gunshotless12 + gunshot12to18
TRAUMAPOVERTY =~  unemployment + homeless
+ poverty1997 + poverty1998 + poverty 1999 + poverty2000 + poverty2001 + poverty2002
TRAUMAFAMILY =~ death + hospitalization + divorce
DELINQUENCY =~ juveniledestroyproperty + juvenilestealless
+ juvenilestealmore + juvenileotherproperty + juvenileattack + juvenileselldrugs
CRIME =~ adultgun + adultdestroyproperty + adultstealless + adultstealmore + adultotherproperty
+ adultattack + adultselldrugs
ELEMSCHOOL  =~ TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + DELINQUENCY
+ elementmiddledropout
+ elementarysuspend + middlesuspend
+ SES + citizenship
HIGHSCHOOL  =~
+ highdropout
+ highsuspend
+ SES
+ citizenship
#######Correlations
#TRAUMACRIME ~~ TRAUMAPOVERTY
#######Regressions
adultincarceration ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL + HIGHSCHOOL + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
HIGHSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL  + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
ELEMSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY  + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
'
##### End Middleschool Model #####
# Converges when you don't ask to compute by group
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data=dataset, std.lv=TRUE, group = "gender")
summary(fit3_gender, standardized=TRUE, fit.measures=TRUE)
MSModel <- '
#######Latent
TRAUMACRIME =~ jail
+ victim + gunshotless12 + gunshot12to18
TRAUMAPOVERTY =~  unemployment + homeless
+ poverty1997 + poverty1998 + poverty 1999 + poverty2000 + poverty2001 + poverty2002
TRAUMAFAMILY =~ death + hospitalization + divorce
DELINQUENCY =~ juveniledestroyproperty + juvenilestealless
+ juvenilestealmore + juvenileotherproperty + juvenileattack + juvenileselldrugs
CRIME =~ adultgun + adultdestroyproperty + adultstealless + adultstealmore + adultotherproperty
+ adultattack + adultselldrugs
ELEMSCHOOL  =~ TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + DELINQUENCY
+ elementmiddledropout
+ elementarysuspend + middlesuspend
+ SES + citizenship
HIGHSCHOOL  =~
+ highdropout
+ highsuspend
+ SES
+ citizenship
#######Correlations
#TRAUMACRIME ~~ TRAUMAPOVERTY
#######Regressions
adultincarceration ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL + HIGHSCHOOL + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
HIGHSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL  + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
ELEMSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY  + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
'
MSModel <- '#######Latent Variables
TRAUMACRIME =~ jail
+ victim + gunshotless12 + gunshot12to18
TRAUMAPOVERTY =~  unemployment + homeless
+ poverty1997 + poverty1998 + poverty 1999 + poverty2000 + poverty2001 + poverty2002
TRAUMAFAMILY =~ death + hospitalization + divorce
DELINQUENCY =~ juveniledestroyproperty + juvenilestealless
+ juvenilestealmore + juvenileotherproperty + juvenileattack + juvenileselldrugs
CRIME =~ adultgun + adultdestroyproperty + adultstealless + adultstealmore + adultotherproperty
+ adultattack + adultselldrugs
ELEMSCHOOL  =~ TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + DELINQUENCY
+ elementmiddledropout
+ elementarysuspend + middlesuspend
+ SES + citizenship
HIGHSCHOOL  =~
+ highdropout
+ highsuspend
+ SES
+ citizenship
#######Correlations
#TRAUMACRIME ~~ TRAUMAPOVERTY
#######Regressions
adultincarceration ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL + HIGHSCHOOL + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
HIGHSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL  + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
ELEMSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY  + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
'
##### End Middleschool Model #####
# Converges when you don't ask to compute by group
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data=dataset, std.lv=TRUE, group = "gender")
typeof(dataset$gender)
dataset$gender <- as.character(dataset$gender)
table(dataset$gender) #3,393 0's and 3,342 1's
typeof(dataset$gender)
table(dataset$gender) #3,393 0's and 3,342 1's
fit3_gender <- cfa(MSModel, data=dataset, std.lv=TRUE, group = "gender")
MSModel <- '
#######Latent Variables
TRAUMACRIME =~ jail
+ victim + gunshotless12 + gunshot12to18
TRAUMAPOVERTY =~  unemployment + homeless
+ poverty1997 + poverty1998 + poverty 1999 + poverty2000 + poverty2001 + poverty2002
TRAUMAFAMILY =~ death + hospitalization + divorce
DELINQUENCY =~ juveniledestroyproperty + juvenilestealless
+ juvenilestealmore + juvenileotherproperty + juvenileattack + juvenileselldrugs
CRIME =~ adultgun + adultdestroyproperty + adultstealless + adultstealmore + adultotherproperty
+ adultattack + adultselldrugs
ELEMSCHOOL  =~ TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + DELINQUENCY
+ elementmiddledropout
+ elementarysuspend + middlesuspend
+ SES + citizenship
HIGHSCHOOL  =~
+ highdropout
+ highsuspend
+ SES
+ citizenship
#######Correlations
#TRAUMACRIME ~~ TRAUMAPOVERTY
#######Regressions
adultincarceration ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL + HIGHSCHOOL + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
HIGHSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL  + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
ELEMSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY  + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
'
##### End Middleschool Model #####
# Converges when you don't ask to compute by group
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data=dataset, std.lv=TRUE, group = "gender")
varTable(fit3_gender)
##### End Middleschool Model #####
# Converges when you don't ask to compute by group
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data=dataset, std.lv=TRUE, group = "gender", orthogonal=TRUE)
?cfa
##### End Middleschool Model #####
# Converges when you don't ask to compute by group
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data=dataset, std.lv=TRUE, group = "gender", group.equal="loadings")
summary(fit3_gender, standardized=TRUE, fit.measures=TRUE)
MSModel <- '
#######Latent Variables
TRAUMACRIME =~ jail
+ victim + gunshotless12 + gunshot12to18
TRAUMAPOVERTY =~  unemployment + homeless
+ poverty1997 + poverty1998 + poverty 1999 + poverty2000 + poverty2001 + poverty2002
TRAUMAFAMILY =~ death + hospitalization + divorce
DELINQUENCY =~ juveniledestroyproperty + juvenilestealless
+ juvenilestealmore + juvenileotherproperty + juvenileattack + juvenileselldrugs
CRIME =~ adultgun + adultdestroyproperty + adultstealless + adultstealmore + adultotherproperty
+ adultattack + adultselldrugs
ELEMSCHOOL  =~ TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + DELINQUENCY
+ elementmiddledropout
+ elementarysuspend + middlesuspend
+ SES + citizenship
HIGHSCHOOL  =~
+ highdropout
+ highsuspend
+ SES
+ citizenship
#######Correlations
#TRAUMACRIME ~~ TRAUMAPOVERTY
#######Regressions
adultincarceration ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL + HIGHSCHOOL + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
HIGHSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL  + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
ELEMSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY  + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
'
fit3_gender <- cfa(MSModel, data=dataset)
summary(fit3_gender, standardized=TRUE, fit.measures=TRUE)
##### End Middleschool Model #####
# Converges when you don't ask to compute by group
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data=dataset, group = "gender", group.equal="loadings")
summary(fit3_gender, standardized=TRUE, fit.measures=TRUE)
##### End Middleschool Model #####
# Converges when you don't ask to compute by group
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data=dataset, group = "gender", group.equal="loadings")
##### End Middleschool Model #####
# Converges when you don't ask to compute by group
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data=dataset, std.lev=TRUE, group = "gender", group.equal="loadings", check.gradient=FALSE)
##### End Middleschool Model #####
# Converges when you don't ask to compute by group
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data=dataset, std.lv=TRUE, group = "gender", group.equal="loadings", check.gradient=FALSE)
summary(fit3_gender, standardized=TRUE, fit.measures=TRUE)
##### End Middleschool Model #####
# Converges when you don't ask to compute by group
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data=dataset, std.lv=TRUE)
##### End Middleschool Model #####
# Converges when you don't ask to compute by group
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data=dataset, std.lv=TRUE)
MSModel <- '
#######Latent Variables
TRAUMACRIME =~ jail
+ victim + gunshotless12 + gunshot12to18
TRAUMAPOVERTY =~  unemployment + homeless
+ poverty1997 + poverty1998 + poverty 1999 + poverty2000 + poverty2001 + poverty2002
TRAUMAFAMILY =~ death + hospitalization + divorce
DELINQUENCY =~ juveniledestroyproperty + juvenilestealless
+ juvenilestealmore + juvenileotherproperty + juvenileattack + juvenileselldrugs
CRIME =~ adultgun + adultdestroyproperty + adultstealless + adultstealmore + adultotherproperty
+ adultattack + adultselldrugs
ELEMSCHOOL  =~ TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + DELINQUENCY
+ elementmiddledropout
+ elementarysuspend + middlesuspend
+ SES + citizenship
HIGHSCHOOL  =~
+ highdropout
+ highsuspend
+ SES
+ citizenship
#######Correlations
#TRAUMACRIME ~~ TRAUMAPOVERTY
#######Regressions
adultincarceration ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL + HIGHSCHOOL + juvenileincarceration + CRIME
+  age +  twoparenthome + gender + black + hispanic  + geography97 + SES + citizenship
HIGHSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL  + juvenileincarceration + CRIME
+  age +  twoparenthome + gender + black + hispanic  + geography97 + SES + citizenship
ELEMSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY  + juvenileincarceration + CRIME
+  age +  twoparenthome + gender + black + hispanic  + geography97 + SES + citizenship
'
##### End Middleschool Model #####
# Converges when you don't ask to compute by group
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data=dataset, std.lv=TRUE)
summary(fit3_gender, standardized=TRUE, fit.measures=TRUE)
fit3_gender <- cfa(MSModel, data=dataset, std.lv=TRUE, group = "gender")
varTable(fit3_gender)
dataset$gender <- as.numeric(dataset$gender)
MSModel <- '
#######Latent Variables
TRAUMACRIME =~ jail
+ victim + gunshotless12 + gunshot12to18
TRAUMAPOVERTY =~  unemployment + homeless
+ poverty1997 + poverty1998 + poverty 1999 + poverty2000 + poverty2001 + poverty2002
TRAUMAFAMILY =~ death + hospitalization + divorce
DELINQUENCY =~ juveniledestroyproperty + juvenilestealless
+ juvenilestealmore + juvenileotherproperty + juvenileattack + juvenileselldrugs
CRIME =~ adultgun + adultdestroyproperty + adultstealless + adultstealmore + adultotherproperty
+ adultattack + adultselldrugs
ELEMSCHOOL  =~ TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + DELINQUENCY
+ elementmiddledropout
+ elementarysuspend + middlesuspend
+ SES + citizenship
HIGHSCHOOL  =~
+ highdropout
+ highsuspend
+ SES
+ citizenship
#######Correlations
#TRAUMACRIME ~~ TRAUMAPOVERTY
#######Regressions
adultincarceration ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL + HIGHSCHOOL + juvenileincarceration + CRIME
+  age +  twoparenthome + gender + black + hispanic  + geography97 + SES + citizenship
HIGHSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL  + juvenileincarceration + CRIME
+  age +  twoparenthome + gender + black + hispanic  + geography97 + SES + citizenship
ELEMSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY  + juvenileincarceration + CRIME
+  age +  twoparenthome + gender + black + hispanic  + geography97 + SES + citizenship
'
##### End Middleschool Model #####
# Converges when you don't ask to compute by group and include gender in the regressions
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data=dataset, std.lv=TRUE, group = "gender")
varTable(fit3_gender)
dataset$gender <- as.numeric(dataset$gender)
MSModel <- '
#######Latent Variables
TRAUMACRIME =~ jail
+ victim + gunshotless12 + gunshot12to18
TRAUMAPOVERTY =~  unemployment + homeless
+ poverty1997 + poverty1998 + poverty 1999 + poverty2000 + poverty2001 + poverty2002
TRAUMAFAMILY =~ death + hospitalization + divorce
DELINQUENCY =~ juveniledestroyproperty + juvenilestealless
+ juvenilestealmore + juvenileotherproperty + juvenileattack + juvenileselldrugs
CRIME =~ adultgun + adultdestroyproperty + adultstealless + adultstealmore + adultotherproperty
+ adultattack + adultselldrugs
ELEMSCHOOL  =~ TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + DELINQUENCY
+ elementmiddledropout
+ elementarysuspend + middlesuspend
+ SES + citizenship
HIGHSCHOOL  =~
+ highdropout
+ highsuspend
+ SES
+ citizenship
#######Correlations
#TRAUMACRIME ~~ TRAUMAPOVERTY
#######Regressions
adultincarceration ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL + HIGHSCHOOL + juvenileincarceration + CRIME
+  age +  twoparenthome + gender + black + hispanic  + geography97 + SES + citizenship
HIGHSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL  + juvenileincarceration + CRIME
+  age +  twoparenthome + gender + black + hispanic  + geography97 + SES + citizenship
ELEMSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY  + juvenileincarceration + CRIME
+  age +  twoparenthome + gender + black + hispanic  + geography97 + SES + citizenship
'
##### End Middleschool Model #####
# Converges when you don't ask to compute by group and include gender in the regressions
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data=dataset, std.lv=TRUE, group = "gender")
MSModel <- '
#######Latent Variables
TRAUMACRIME =~ jail
+ victim + gunshotless12 + gunshot12to18
TRAUMAPOVERTY =~  unemployment + homeless
+ poverty1997 + poverty1998 + poverty 1999 + poverty2000 + poverty2001 + poverty2002
TRAUMAFAMILY =~ death + hospitalization + divorce
DELINQUENCY =~ juveniledestroyproperty + juvenilestealless
+ juvenilestealmore + juvenileotherproperty + juvenileattack + juvenileselldrugs
CRIME =~ adultgun + adultdestroyproperty + adultstealless + adultstealmore + adultotherproperty
+ adultattack + adultselldrugs
ELEMSCHOOL  =~ TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + DELINQUENCY
+ elementmiddledropout
+ elementarysuspend + middlesuspend
+ SES + citizenship
HIGHSCHOOL  =~
+ highdropout
+ highsuspend
+ SES
+ citizenship
#######Correlations
#TRAUMACRIME ~~ TRAUMAPOVERTY
#######Regressions
adultincarceration ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL + HIGHSCHOOL + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
HIGHSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL  + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
ELEMSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY  + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
'
##### End Middleschool Model #####
# Converges when you don't ask to compute by group and include gender in the regressions
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data=dataset, std.lv=TRUE, group = "gender")
summary(fit3_gender, standardized=TRUE, fit.measures=TRUE)
MSModel <- '
#######Latent Variables
TRAUMACRIME =~ jail
+ victim + gunshotless12 + gunshot12to18
TRAUMAPOVERTY =~  unemployment + homeless
+ poverty1997 + poverty1998 + poverty 1999 + poverty2000 + poverty2001 + poverty2002
TRAUMAFAMILY =~ death + hospitalization + divorce
DELINQUENCY =~ juveniledestroyproperty + juvenilestealless
+ juvenilestealmore + juvenileotherproperty + juvenileattack + juvenileselldrugs
CRIME =~ adultgun + adultdestroyproperty + adultstealless + adultstealmore + adultotherproperty
+ adultattack + adultselldrugs
ELEMSCHOOL  =~ TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + DELINQUENCY
+ elementmiddledropout
+ elementarysuspend + middlesuspend
+ SES + citizenship
HIGHSCHOOL  =~
+ highdropout
+ highsuspend
+ SES
+ citizenship
#######Correlations
#TRAUMACRIME ~~ TRAUMAPOVERTY
#######Regressions
adultincarceration ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL + HIGHSCHOOL + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97
HIGHSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY + ELEMSCHOOL  + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
ELEMSCHOOL ~  TRAUMACRIME + TRAUMAPOVERTY + TRAUMAFAMILY  + juvenileincarceration + CRIME
+  age +  twoparenthome + black + hispanic  + geography97 + SES + citizenship
'
##### End Middleschool Model #####
# Converges when you don't ask to compute by group and include gender in the regressions
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data = dataset, std.lv=TRUE, group="gender")
##### End Middleschool Model #####
# Converges when you don't ask to compute by group and include gender in the regressions
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data = dataset, std.lv=TRUE, group="gender", check.gradient=FALSE)
summary(fit3_gender, standardized=TRUE, fit.measures=TRUE)
##### End Middleschool Model #####
# Converges when you don't ask to compute by group and include gender in the regressions
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data = dataset, std.lv=TRUE, group="gender", optim.method="BFGS")
summary(fit3_gender, standardized=TRUE, fit.measures=TRUE)
##### End Middleschool Model #####
# Converges when you don't ask to compute by group and include gender in the regressions
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data = dataset, std.lv=TRUE, group="gender", optim.force.coverged=TRUE)
##### End Middleschool Model #####
# Converges when you don't ask to compute by group and include gender in the regressions
# Does not compute the standard errors when asked to compute by group
fit3_gender <- cfa(MSModel, data = dataset, std.lv=TRUE, group="gender", optim.force.converged=TRUE)
summary(fit3_gender, standardized=TRUE, fit.measures=TRUE)
