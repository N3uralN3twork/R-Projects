PA56 %in% c(NA, 6) ~ NaN,
PA56 == 0 ~ 1,
PA56 == 1 ~ 0))
table(waves$CantPayBills)
###################
### TRAUMA Vars ###
###################
"Neglect:"
table(waves$H3MA2) # basic needs
table(waves$H3MA1) # left home alone
# Basic Needs
waves <- waves %>%
mutate(BasicNeeds = case_when(
H3MA2 %in% c(NA, 96, 98, 99) ~ NaN,
H3MA2 %in% c(1, 2, 3, 4, 5) ~ 1,
TRUE ~ 0))
table(waves$BasicNeeds)
# Left Home Alone
waves <- waves %>%
mutate(HomeAlone = case_when(
H3MA1 %in% c(NA, 96, 98, 99) ~ NaN,
H3MA1 %in% c(1, 2, 3, 4, 5) ~ 1,
H3MA1 == 6 ~ 0))
table(waves$HomeAlone)
"Physical Abuse:"
table(waves$H3MA3) # slapped/hit/kicked
waves <- waves %>%
mutate(SlapHitKick = case_when(
H3MA3 %in% c(NA, 96, 98, 99) ~ NaN,
H3MA3 %in% c(1, 2, 3, 4, 5) ~ 1,
H3MA3 == 6 ~ 0))
table(waves$SlapHitKick)
"Sexual Abuse:"
table(waves$H3MA4) # touched in sexual way
waves <- waves %>%
mutate(Touched = case_when(
H3MA4 %in% c(NA, 96, 98, 99, 0) ~ NaN,
H3MA4 %in% c(1, 2, 3, 4, 5) ~ 1,
H3MA4 == 6 ~ 0))
table(waves$Touched)
"Emotional Abuse:"
table(waves$H4MA1) # hurt your feelings/feel unloved
waves <- waves %>%
mutate(HurtFeelings = case_when(
H4MA1 %in% c(NA, 96, 98) ~ NaN,
H4MA1 %in% c(1, 2, 3, 4, 5) ~ 1,
H4MA1 == 6 ~ 0))
table(waves$HurtFeelings)
"Parental Incarceration:"
table(waves$H4WP9) # Bio Father jail
table(waves$H4WP3) # Bio Mother jail
table(waves$H4WP30) # Father Figure jail
table(waves$H4WP16) # Mother Figure jail
# Bio Father Jail
waves <- waves %>%
mutate(BioFatherJail = replace(H4WP9, H4WP9 %in% c(6, 8), NA))
table(waves$BioFatherJail)
# Bio Mother Jail
waves <- waves %>%
mutate(BioMotherJail = replace(H4WP3, H4WP3 %in% c(6, 8), NA))
table(waves$BioMotherJail)
# Father Figure Jail
waves <- waves %>%
mutate(FigFatherJail = replace(H4WP30, H4WP30 %in% c(6, 7, 8), NA))
table(waves$FigFatherJail)
# Mother Figure Jail
waves <- waves %>%
mutate(FigMotherJail = replace(H4WP16, H4WP16 %in% c(7, 8), NA))
table(waves$FigMotherJail)
"Parent Binge Drinker:"
# More 5 drinks on one occasion
table(waves$PA62)
waves <- waves %>%
mutate(BingeDrink = case_when(
PA62 %in% c(NA, 96) ~ NaN,
PA62 %in% c(2, 3, 4, 5, 6) ~ 1,
PA62 == 1 ~ 0))
table(waves$BingeDrink)
"Creating the Trauma variable:"
# 0 = no traumas experienced
# 1 = at least 1 trauma experienced
waves <- waves %>%
mutate(Trauma = case_when(
JVictim == 1 | BasicNeeds == 1 | HomeAlone == 1 |
SlapHitKick == 1 | Touched == 1 | HurtFeelings == 1 |
BioFatherJail == 1 | BioMotherJail == 1 | FigFatherJail == 1 |
FigMotherJail == 1 | BingeDrink ==1 ~ 1,
TRUE ~ 0))
table(waves$Trauma)
"Homeless:"
# 0 = never been homeless
# 1 = has been homeless at least once
# NA = Skip/Don't Know/NA
waves <- waves %>%
mutate(Homeless = replace(H3HR24, H3HR24 %in% c(7, 8, 9), NA))
table(waves$Homeless)
"Adult Delinquency:"
# Non-aggressive Adult Delinquency:
table(waves$H4DS2) # Steal More $50
table(waves$H4DS6) # Steal Less $50
table(waves$H4DS8) # Steal Property
table(waves$H4DS1) # Damage others property
# Aggressive Adult Delinquency:
table(waves$H4DS20) # Shot / Stabbed someone
table(waves$H4DS11) # Got into a serious physical fight
table(waves$H4DS19) # You pulled a knife/gun on someone
table(waves$H4DS5) # Sold drugs
"Fixing the variables to remove Refused/Don't Know/Not Applicable"
"Adult Steal More than $50:"
waves <- waves %>%
mutate(AStealMore = case_when(
H4DS2 %in% c(6, 8) ~ NaN,
H4DS2 == 0 ~ 0,
H4DS2 %in% c(1, 2, 3) ~ 1))
table(waves$AStealMore)
"Adult Steal Less than $50:"
waves <- waves %>%
mutate(AStealLess = case_when(
H4DS6 %in% c(6, 8) ~ NaN,
H4DS6 == 0 ~ 0,
H4DS6 %in% c(1, 2, 3) ~ 1))
table(waves$AStealLess)
"Adult Steal Property:"
waves <- waves %>%
mutate(AStealProperty = case_when(
H4DS8 %in% c(6, 8) ~ NaN,
H4DS8 == 0 ~ 0,
H4DS8 %in% c(1, 2, 3) ~ 1))
table(waves$AStealProperty)
"Adult Damage Other Property:"
waves <- waves %>%
mutate(ADamageProperty = case_when(
H4DS1 %in% c(6, 8) ~ NaN,
H4DS1 == 0 ~ 0,
H4DS1 %in% c(1, 2, 3) ~ 1))
table(waves$ADamageProperty)
"Adult Shoot/Stab Someone:"
waves <- waves %>%
mutate(AShootStab = replace(H4DS20, H4DS20 %in% c(NA, 6, 8), NA))
table(waves$AShootStab)
" Adult Serious Physical Fight:"
waves <- waves %>%
mutate(APhysicalFight = case_when(
H4DS11 %in% c(6, 8) ~ NaN,
H4DS11 == 0 ~ 0,
H4DS11 %in% c(1, 2, 3) ~ 1))
table(waves$APhysicalFight)
"Adult Pulled a Knife/Gun on Someone"
waves <- waves %>%
mutate(AKnifeGun = replace(H4DS19, H4DS19 %in% c(NA, 6, 8), NA))
table(waves$AKnifeGun)
"Adult Sell Drugs:"
waves <- waves %>%
mutate(ASellDrugs = case_when(
H4DS5 %in% c(6, 8) ~ NaN,
H4DS5 == 0 ~ 0,
H4DS5 %in% c(1, 2, 3) ~ 1))
table(waves$ASellDrugs)
"Foster Home:"
waves <- waves %>%
mutate(FosterHome = replace(H3OD31, H3OD31 %in% c(NA, 6, 8, 9), NA))
table(waves$FosterHome)
"Juvenile Delinquency:
The prefix will be JD"
# Drunk Driving:
table(waves$H1JO9)
waves <- waves %>%
mutate(JDDriveDrunk = case_when(
H1JO9 %in% c(6, 8) ~  NaN,
H1JO9 %in% c(0, 7) ~ 0,
H1JO9 == 1 ~ 1))
table(waves$JDDriveDrunk)
#############
### Drugs ###
#############
# Driven while High on Drugs:
waves <- waves %>%
mutate(JDDriveHigh = case_when(
H1JO19 %in% c(6, 8) ~ NaN,
H1JO19 %in% c(0, 7) ~ 0,
H1JO19 == 1 ~ 1))
table(waves$JDDriveHigh)
# Sell Marijuana / Other Drugs in Wave 1:
waves <- waves %>%
mutate(JDSellDrugs = case_when(
H1DS12 %in% c(6, 8, 9) ~ NaN,
H1DS12 == 0 ~ 0,
H1DS12 %in% c(1,2,3) ~ 1))
table(waves$JDSellDrugs)
# Use illegal drugs in past 30 days:
waves <- waves %>%
mutate(JDIllegalDrugUse = case_when(
H1TO42 %in% c(996, 998, 999) ~ NaN,
H1TO42 %in% c(0, 997) ~ 0,
H1TO42 %in% seq(1, 900) ~ 1))
table(waves$JDIllegalDrugUse)
# Cocaine use:
waves <- waves %>%
mutate(JDCocaineUse = case_when(
H1TO35 %in% c(996, 998, 999) ~ NaN,
H1TO35 == 997 ~ 0,
TRUE ~ 1))
table(waves$JDCocaineUse)
# Using illegal drugs via a Needle:
waves <- waves %>%
mutate(JDIllegalDrugNeedle = case_when(
H1TO43 %in% c(6, 8, 9) ~ NaN,
H1TO43 %in% c(0, 7) ~ 0,
H1TO43 == 1 ~ 1))
table(waves$JDIllegalDrugNeedle)
# Alone first time drug use:
waves <- waves %>%
mutate(JDAloneDrugUse = case_when(
H1JO24 %in% c(6, 8) ~ NaN,
H1JO24 %in% c(0, 7) ~ 0,
H1JO24 == 1 ~ 1))
table(waves$JDAloneDrugUse)
# Fight while on drugs:
waves <- waves %>%
mutate(JDFightOnDrugs = case_when(
H1JO21 %in% c(6, 8) ~ NaN,
H1JO21 %in% c(0, 7) ~ 0,
H1JO21 == 1 ~ 1))
table(waves$JDFightOnDrugs)
# Carrying a weapon while on drugs:
waves <- waves %>%
mutate(JDWeaponOnDrugs = case_when(
H1JO23 %in% c(6, 8) ~ NaN,
H1JO23 %in% c(0, 7) ~ 0,
H1JO23 == 1 ~ 1))
table(waves$JDWeaponOnDrugs)
################
### STEALING ###
################
# Stealing something less than $50:
waves <- waves %>%
mutate(JDStealLess = case_when(
H1DS13 %in% c(6, 8, 9) ~ NaN,
H1DS13 == 0 ~ 0,
H1DS13 %in% c(1, 2, 3) ~ 1))
table(waves$JDStealLess)
# Stealing something more than $50 in past 12 months:
waves <- waves %>%
mutate(JDStealMore = case_when(
H1DS9 %in% c(6, 8, 9) ~ NaN,
H1DS9 == 0 ~ 0,
H1DS9 %in% c(1, 2, 3) ~ 1))
table(waves$JDStealMore)
# Stealing from a store:
waves <- waves %>%
mutate(JDStealStore = case_when(
H1DS4 %in% c(6, 8, 9) ~ NaN,
H1DS4 == 0 ~ 0,
H1DS4 %in% c(1, 2, 3) ~ 1))
table(waves$JDStealStore)
#############
### OTHER ###
#############
# Pulled a knife/gun on someone past 12 months:
waves <- waves %>%
mutate(JDKnifeGun = case_when(
H1FV7 %in% c(6, 8, 9) ~ NaN,
H1FV7 == 0 ~ 0,
H1FV7 %in% c(1, 2) ~ 1))
table(waves$JDKnifeGun)
# You shot/stabbed someone past 12 months:
waves <- waves %>%
mutate(JDShootStab = case_when(
H1FV8 %in% c(6, 8, 9) ~ NaN,
H1FV8 == 0 ~ 0,
H1FV8 %in% c(1, 2) ~ 1))
table(waves$JDShootStab)
# Lie to parents/guardians about whereabouts past 12 months:
waves <- waves %>%
mutate(JDLying = case_when(
H1DS3 %in% c(6, 8, 9) ~ NaN,
H1DS3 == 0 ~ 0,
H1DS3 %in% c(1, 2, 3) ~ 1))
table(waves$JDLying)
# Physical Fight past 12 months:
waves <- waves %>%
mutate(JDPhysicalFight = case_when(
H1JO11 %in% c(6, 8) ~ NaN,
H1JO11 %in% c(0, 7) ~ 0,
H1JO11 == 1 ~ 1))
table(waves$JDPhysicalFight)
# Serious Physical Fight past 12 months:
waves <- waves %>%
mutate(JDSeriousPhysicalFight = case_when(
H1DS5 %in% c(6, 8, 9) ~ NaN,
H1DS5 == 0 ~ 0,
H1DS5 %in% c(1, 2, 3) ~ 1))
table(waves$JDSeriousPhysicalFight)
# Damage Property past 12 months:
waves <- waves %>%
mutate(JDDamageProperty = case_when(
H1DS2 %in% c(6, 8, 9) ~ NaN,
H1DS2 == 0 ~ 0,
H1DS2 %in% c(1, 2, 3) ~ 1))
table(waves$JDDamageProperty)
# Used a weapon in a fight:
waves <- waves %>%
mutate(JDWeaponFight = case_when(
H1JO26 %in% c(6, 8, 9) ~ NaN,
H1JO26 == 0 ~ 0,
H1JO26 == 1 ~ 1))
table(waves$JDWeaponFight)
# Hurt Someone Badly Enough past 12 months:
waves <- waves %>%
mutate(JDHurtBadly = case_when(
H1DS6 %in% c(6, 8, 9) ~ NaN,
H1DS6 == 0 ~ 0,
H1DS6 %in% c(1, 2, 3) ~ 1))
table(waves$JDHurtBadly)
# Paint graffiti past 12 months:
waves <- waves %>%
mutate(JDGraffitPaint = case_when(
H1DS1 %in% c(6, 8, 9) ~ NaN,
H1DS1 == 0 ~ 0,
H1DS1 %in% c(1, 2, 3) ~ 1))
table(waves$JDGraffitPaint)
"Juvenile Incarceration:"
# 0 = No
# 1 = Yes
# NA = Missing/NA
waves <- waves %>%
mutate(JIncarceration = case_when(
H4CJ5 %in% c(996, 998) ~ NaN,
H4CJ5 == 997 ~ 0,
H4CJ5 %in% seq(1, 95) ~ 1))
table(waves$JIncarceration)
table(is.na(waves$JIncarceration))
"Adult Incarceration"
# 0 = No
# 1 = Yes
# NA = Missing/NA
waves <- waves %>%
mutate(AIncarceration = case_when(
is.na(H4CJ6) ~ NaN,
H4CJ6 %in% c(96, 98) ~ NaN,
H4CJ6 == 97 ~ 0,
H4CJ6 %in% seq(1,90) ~ 1))
table(waves$AIncarceration)
table(is.na(waves$AIncarceration))
#########################
variables <- as.data.frame(names(waves))
#########################
"Select only the necessary variables:"
attach(waves)
Waves <- waves %>%
select(AID, H1GI1Y,
PEducation, Race, Black, Asian, Age, Geography, Gender, Gender.Coded, Hispanic, Citizenship,
EverSuspend, Divorce, JIncarceration, AIncarceration, FirstIncarcAge, TwoParentHome,
P1Education, P2Education, SES, JIncarceMonths, AIncarceMonths, AEmployed,
MotherEmployed, FatherEmployed, Unemployment, MotherHoursWeek, FatherHoursWeek,
MotherOvertime, FatherOvertime, W1Grade, W1GradeLevel, W2Grade, W2GradeLevel,
MiddleDropout, HighDropout, FamilySize, Death, HighestGrade, HighGrade15,
SuspendGrade, ESuspend, MSuspend, HSuspend, Expel, ADPhysicalFight, ADKnifeGun,
ADShootStab, ADWeaponSchool, NADLying, NADShoplift,
NADStealLess, NADStealMore, AtPCloseMother,
AtPCloseFather, AtPMotherCare, AtPFatherCare,
AtSClose, AtSHappy, AtSPartOf, AtSFairly,
AtDPCigs, AtDPAlcohol, AtDPWeed, APEnglish,
APMath, APHistory, APScience, AggDelinq,
NonAggDelinq, AttachParents, AtDelinqPeers, AcadPerform,
JVictim, AVictim, Victim, CantPayBills, BasicNeeds, HomeAlone, SlapHitKick,
Touched, HurtFeelings, BioFatherJail, BioMotherJail, FigFatherJail, FigMotherJail,
BingeDrink, Trauma, Homeless, AStealMore, AStealLess, AStealProperty, ADamageProperty,
AShootStab, APhysicalFight, AKnifeGun, ASellDrugs, FosterHome,
JDDriveDrunk, JDDriveHigh, JDSellDrugs, JDIllegalDrugUse, JDCocaineUse, JDIllegalDrugNeedle,
JDAloneDrugUse, JDFightOnDrugs, JDWeaponOnDrugs, JDStealLess, JDStealMore, JDStealStore,
JDKnifeGun, JDShootStab, JDLying, JDPhysicalFight, JDSeriousPhysicalFight, JDDamageProperty,
JDWeaponFight, JDHurtBadly, JDGraffitPaint)
"Rename some of the variables:"
#New = Old
Waves <- Waves %>%
rename(BirthYear = H1GI1Y)
attach(Waves)
names(Waves)
vars <- data.frame(names(Waves))
rm(wave1)
rm(wave2)
rm(wave3)
rm(wave4)
rm(test)
table(waves$H3DS8)
table(waves$H4DS2)
waves <- waves %>%
mutate(AdultStealMore = case_when(
H4DS2 %in% c(6, 8) ~ NaN,
H4DS2 == 0 ~ 0,
H4DS2 %in% c(1, 2, 3) ~ 1))
table(waves$AdultStealMore)
table(H4DS6)
waves <- waves %>%
mutate(AdultStealLess = case_when(
H4DS6 %in% c(6, 8) ~ NaN,
H4DS6 == 0 ~ 0,
H4DS6 %in% c(1, 2, 3) ~ 1))
table(waves$AdultStealLess)
table(waves$H4DS19)
waves <- waves %>%
mutate(AdultGun = case_when(
H4DS19 %in% c(6, 8) ~ NaN,
H4DS19 == 0 ~ 0,
H4DS19 == 1 ~ 1))
table(waves$AdultGun)
table(waves$H4DS20)
waves <- waves %>%
mutate(AdultShootStab = case_when(
H4DS20 %in% c(6, 8) ~ NaN,
H4DS20 == 0 ~ 0,
H4DS20 == 1 ~ 1))
table(waves$AdultShootStab)
table(H4DS5)
table(waves$H4DS8)
table(waves$H3DS8)
table(waves$H4DS8)
table(waves$H3DS8)
table(waves$H4DS8)
table(waves$H3DS8)
waves <- waves %>%
mutate(AH4DS8 = case_when(
H4DS8 %in% c(6, 8) ~ NaN,
H4DS8 == 0 ~ 0,
H4DS8 %in% c(1, 2, 3) ~ 1)) %>%
mutate(AH3DS8 = case_when(
H3DS8 %in% c(6, 8, 9) ~ NaN,
H3DS8 == 0 ~ 0,
H3DS8 %in% c(1, 2, 3) ~ 1)) %>%
mutate(AdultOtherProperty = case_when(
AH3DS8 == 1 | AH4DS8 == 1 ~ 1,
TRUE ~ 0))
table(waves$AdultOtherProperty)
waves <- waves %>%
mutate(AH4DS8 = case_when(
H4DS8 %in% c(6, 8) ~ NaN,
H4DS8 == 0 ~ 0,
H4DS8 %in% c(1, 2, 3) ~ 1)) %>%
mutate(AH3DS8 = case_when(
H3DS8 %in% c(6, 8, 9) ~ NaN,
H3DS8 == 0 ~ 0,
H3DS8 %in% c(1, 2, 3) ~ 1)) %>%
mutate(AdultOtherProperty = case_when(
is.na(AH3DS8) & is.na(AH4DS8) ~ NaN,
AH3DS8 == 1 | AH4DS8 == 1 ~ 1,
TRUE ~ 0))
table(waves$AdultOtherProperty)
rm(list = ls())
a <- c(1, 2, 3)
b <- c(4, 5, 6)
stack(a, b)
a <- data.frame(A = c(1, 2, 3))
a <- data.frame(A = c(1, 2, 3))
b <- data.frame(B = c(4, 5, 6))
stack(a, b)
View(a)
library(dplyr)
combine(a, b)
vec_c(a, b)
c(a, b)
c <- c(a, b)
a <- c(1, 2, 3)
b <- c(4, 5, 6)
c <- c(a, b)
print(c)
c <- data.frame(c(a, b))
print(c)
rm(list = ls())
# Building the design schema for 1 site:
SCHEMA <- function(prefix = "AAA", NSubjects, NSites=1, NFactors){
row_count = (NSubjects * NSites)
col_count = (NFactors)
result <- vector("list", length = NSubjects)
for (i in seq(1, NSubjects)){
if (i < 10){
result[[i]] <- paste(prefix, i, sep = "0")
} else {
result[[i]] <- paste(prefix, i, sep = "")}}
result <- t(as.data.frame(result))
TLC = data.frame(TorC = sample(t(rep(c("T", "C"), 15))))
mattrix <- matrix(nrow = row_count, ncol = col_count)
final = data.frame(ID = result, mattrix, row.names = NULL)
final = final[sample(nrow(final)), ]
final = data.frame(Order = 1:row_count, final)
final = data.frame(ID = paste(final$ID, TLC$TorC, sep = ""), Order = seq(1:row_count), mattrix, row.names = NULL)
return(final)
}
matt = SCHEMA(prefix = "AAA", NSubjects = 30, NFactors = 3)
View(matt)
View(matt)
sites <- c("AAA", "BBB")
for (site in sites){
print(site)
}
for (site in sites){
print(rep(site, 48))
}
list = vector("list", length = 30)
View(list)
list = vector("list", length = 30)
for (site in sites){
list[i] = rep(site, 30)
}
list = vector("list", length = 30)
for (site in sites){
list[site] = rep(site, 30)
}
list = vector("list", length = 60)
for (site in sites){
list[site] = rep(site, 30)
}
