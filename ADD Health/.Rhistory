ti
edge [color = black]
xi -> ti
label='N'
}
node [shape = circle,
color = 'red']
w
node [shape = diamond,
color = black,
label = '&alpha;']
alpha
node [shape = diamond,
color = black,
label = '&sigma;&#x00B2;']
sigma
edge [color = black]
alpha -> w
w -> ti
sigma -> ti
}
",
engine = "dot")
mermaid("
graph LR
A[Gender]
B[Age]
C[Height]
D[Income]
E(Demographics)
F((Happiness))
A-->E
B-->E
C-->E
D-->E
E==>F
D==>F
")
# Testing
mermaid("
digraph LR
A[Gender]
B[Age]
C[Height]
D[Income]
E(Demographics)
F((Happiness))
A-->E
B-->E
C-->E
D-->E
E==>F
D==>F
")
install.packages(c("carData", "ggraph", "sem", "sp", "tidyr"))
install.packages(c("ggraph", "haven", "labelled", "rversions", "sem", "sp", "tidyr"))
install.packages(c("dplyr", "ggplot2", "httpuv", "pkgload", "StanHeaders"))
install.packages(c("dplyr", "haven", "pkgload"))
install.packages(c("httpuv", "later", "rms", "SQUAREM", "vctrs"))
library(readr)
install.packages(c("epiR", "lubridate", "mvtnorm", "partykit", "promises", "RcppArmadillo", "sf", "StanHeaders", "survival", "units"))
library(readr)
wave1 <- read_delim("C:/Users/miqui/Downloads/ICPSR_21600-V21/ICPSR_21600/DS0001/21600-0001-Data.tsv",
"\t", escape_double = FALSE, trim_ws = TRUE)
View(wave1)
library(readr)
wave2 <- read_delim("C:/Users/miqui/Downloads/ICPSR_21600-Wave2/ICPSR_21600/DS0005/21600-0005-Data.tsv",
"\t", escape_double = FALSE, trim_ws = TRUE)
View(wave2)
table(unique(wave1$AID))
View(wave1)
table(is.na(wave1$AID))
library(dplyr)
install.packages(c("backports", "glmnet", "htmltools", "labelled", "sf", "survival", "units"))
library(dplyr)
library(readr)
wave1 <- read_delim("C:/Users/miqui/Downloads/ICPSR_21600-V21/ICPSR_21600/DS0001/21600-0001-Data.tsv",
"\t", escape_double = FALSE, trim_ws = TRUE)
library(readr)
wave2 <- read_delim("C:/Users/miqui/Downloads/ICPSR_21600-Wave2/ICPSR_21600/DS0005/21600-0005-Data.tsv",
"\t", escape_double = FALSE, trim_ws = TRUE)
wave1 <- as.data.frame(wave1)
wave2 <- as.data.frame(wave2)
waves <- merge(wave1, wave2, by="AID")
View(wave2)
View(waves)
2794+2532
View(wave1)
library(lubridate)
idate = mdy(wave1$IMONTH,wave1$IDAY,wave1$IYEAR)
ymd(c(1997,12,20))
ymd("09-09-09")
x <- c(20090101, "2009-01-02", "2009 01 03", "2009-1-4",
"2009-1, 5", "Created on 2009 1 6", "200901 !!! 07")
ymd(x)
View(waves)
table(waves$IYEAR)
library(dplyr)
View(waves)
rm(wave1)
rm(wave2)
waves <- waves %>%
select(AID, IMONTH, IDAY, IYEAR)
View(waves)
waves <- waves %>%
mutate(Year = IYEAR + 1990)
waves <- waves %>%
mutate(Year = IYEAR + 1900)
attach(waves)
names(waves)
paste(IMONTH, IDAY, IYEAR)
waves <- waves %>%
mutate(Date = paste(IMONTH, IDAY, IYEAR))
mdy(waves$Date)
waves <- waves %>%
mutate(Date = mdy(paste(IMONTH, IDAY, IYEAR)))
attach(waves)
table(Date)
rm(waves)
library(readr)
wave1 <- read_delim("C:/Users/miqui/Downloads/ICPSR_21600-V21/ICPSR_21600/DS0001/21600-0001-Data.tsv",
"\t", escape_double = FALSE, trim_ws = TRUE)
wave2 <- read_delim("C:/Users/miqui/Downloads/ICPSR_21600-Wave2/ICPSR_21600/DS0005/21600-0005-Data.tsv",
"\t", escape_double = FALSE, trim_ws = TRUE)
wave1 <- as.data.frame(wave1)
wave2 <- as.data.frame(wave2)
waves <- merge(wave1, wave2, by="AID")
waves <- waves %>%
select(AID, IMONTH, IDAY, IYEAR)
waves <- waves %>%
mutate(IDate = mdy(paste(IMONTH, IDAY, IYEAR)))
waves <- merge(wave1, wave2, by="AID")
waves <- waves %>%
select(AID, IMONTH, IDAY, IYEAR, H1GI1M, H1GI1Y)
attach(waves)
waves <- waves %>%
mutate(BDate = mdy(paste(H1GI1M, 15, H1GI1Y)))
waves <- waves %>%
mutate(BDate = mdy(paste(H1GI1M, "15", H1GI1Y)))
waves <- waves %>%
mutate(BDate = mdy(paste(H1GI1M, 15, H1GI1Y)))
waves <- waves %>%
mutate(IDate = mdy(paste(IMONTH, IDAY, IYEAR)))
waves <- waves %>%
mutate(Age = (IDate - BDate))
attach(waves)
str(waves)
waves <- waves %>%
mutate(Age = years(IDate - BDate))
waves <- waves %>% select(-Age)
test <- waves %>%
mutate(Age = year(IDate - BDate))
test <- waves %>%
mutate(Age = year(IDate - BDate))
test <- waves %>%
mutate(Age = as.numeric((IDate - BDate)/365.25))
View(test)
rm(test)
waves <- waves %>%
mutate(Age = as.numeric((IDate - BDate)/365.25))
View(waves)
summary(waves$Age)
rm(waves1)
rm(wave2)
rm(wave1)
install.packages(c("backports", "htmltools", "rmarkdown", "rstatix"))
install.packages(c("backports", "ggplot2", "htmltools", "tinytex"))
"Sources: https://www.cpc.unc.edu/projects/addhealth/faqs/aboutdata/index.html#what-is-the-best"
"Read in the data and necessary libraries:"
setwd("C:/Users/miqui/OneDrive/R Projects/ADD Health")
library(dplyr)
library(lubridate)
library(rcompanion)
library(readr)
wave1 <- read_delim("Wave1.tsv", "\t", escape_double = FALSE,
trim_ws = TRUE)
View(wave1)
library(readr)
wave2 <- read_delim("Wave2.tsv", "\t", escape_double = FALSE,
trim_ws = TRUE)
View(wave2)
library(readr)
wave3 <- read_delim("Wave3.tsv", "\t",
escape_double = FALSE, trim_ws = TRUE)
View(wave3)
library(readr)
wave4 <- read_delim("Wave4.tsv", "\t", escape_double = FALSE,
trim_ws = TRUE)
View(wave4)
"Turn into data-frames:"
wave1 <- as.data.frame(wave1)
wave2 <- as.data.frame(wave2)
wave3 <- as.data.frame(wave3)
wave4 <- as.data.frame(wave4)
table(unique(wave1$AID))
table(is.na(wave1$AID))
"Merge waves by AID:"
waves <- merge(wave1, wave2, by="AID")
waves <- merge(waves, wave3, by="AID")
waves <- merge(waves, wave4, by="AID")
"Calculating the Age:"
waves <- waves %>%
mutate(IDate = mdy(paste(IMONTH, IDAY, IYEAR)))
waves <- waves %>%
mutate(BDate = mdy(paste(H1GI1M, 15, H1GI1Y)))
waves <- waves %>%
mutate(Age = as.numeric((IDate - BDate)/365.25))
summary(waves$Age)
"Age @ First Incarceration"
waves <- waves %>%
mutate(FirstIncarcAge = replace(H4CJ20, H4CJ20 %in% c(NA, 96, 97, 98), NA))
table(waves$FirstIncarcAge)
table(is.na(waves$FirstIncarcAge))
"Months Incarcerated as a Juvenile"
# 0 = 0 or legitimate skip
# NA = NA/96/98
# [1-11] = [1-11]
waves <- waves %>%
mutate(JIncarceMonths = replace(H4CJ24Y, H4CJ24Y %in% c(NA, 96, 98), NA)) %>%
mutate(JIncarceMonths2 = replace(H4CJ24M, H4CJ24M %in% c(NA, 96, 98), NA)) %>%
mutate(JIncarceMonths = replace(JIncarceMonths, JIncarceMonths == 97, 0)) %>%
mutate(JIncarceMonths2 = replace(JIncarceMonths2, JIncarceMonths2 == 97, 0)) %>%
mutate(JIncarceMonths = (12*JIncarceMonths)) %>%
mutate(JIncarceMonths = JIncarceMonths + JIncarceMonths2)
table(H4CJ24Y)
table(H4CJ24M)
table(waves$JIncarceMonths)
"Months Incarcerated as an Adult:"
# Replace Missing/Refused/Don't Knows with NA's
# Convert years in prison to months in prison
# Add months in prison to converted months to get total months in prison
waves <- waves %>%
mutate(AIncarceMonths = replace(H4CJ25Y, H4CJ25Y %in% c(NA, 96, 98), NA)) %>%
mutate(AIncarceMonths2 = replace(H4CJ25M, H4CJ25M %in% c(NA, 96, 98), NA)) %>%
mutate(AIncarceMonths = replace(AIncarceMonths, AIncarceMonths == 97, 0)) %>%
mutate(AIncarceMonths2 = replace(AIncarceMonths2, AIncarceMonths2 == 97, 0)) %>%
mutate(AIncarceMonths = (12*AIncarceMonths)) %>%
mutate(AIncarceMonths = AIncarceMonths + AIncarceMonths2)
table(H4CJ25Y)
table(H4CJ25M)
table(waves$AIncarceMonths)
"Calculating the Race:"
waves <- waves %>%
mutate(Race = case_when(
H1GI4 == 1 ~ "Hispanic",
H1GI6B == 1 ~ "Black",
H1GI6D == 1 ~ "Asian",
H1GI6C == 1 ~ "NativeAmerican",
H1GI6E == 1 ~ "Other",
H1GI6A == 1 ~ "White"))
table(waves$Race)
table(PA12)
table(is.na(PA12))
"Parent's Highest Education:"
# 0 = missing/refused
# 1 = HS or less
# 2 = some college / trade school
# 3 = College or higher
waves <- waves %>%
mutate(PEducation = case_when(
is.na(PA12) ~ NaN,
PA12 == 96 ~ NaN,
PA12 %in% c(1,2,3, 4,5,10) ~ 1,
PA12 %in% c(6,7) ~ 2,
PA12 %in% c(8, 9) ~ 3))
table(waves$PEducation)
"SES:"
table(waves$PA12)
table(waves$PB8)
table(is.na(waves$PA12))
waves <- waves %>%
mutate(P1Education = case_when(
is.na(PA12) ~ NaN,
PA12 == 96 ~ NaN,
PA12 %in% c(1,2,3,4,5,6,7,10) ~ 0,
PA12 %in% c(8, 9) ~ 1)) %>%
mutate(P2Education = case_when(
is.na(PB8) ~ NaN,
PB8 %in% c(96, 97, 11, 12) ~ NaN,
PB8 %in% c(1,2,3,4,5,6,7,10) ~ 0,
PB8 %in% c(8,9) ~ 1)) %>%
mutate(SES = case_when(
is.na(P1Education) & is.na(P2Education) ~ NaN,
is.na(P1Education) & P2Education == 0 ~ 0,
is.na(P1Education) & P2Education == 1 ~ 1,
P1Education == 0 & is.na(P2Education) ~ 0,
P1Education == 0 & P2Education == 0 ~ 0,
P1Education == 0 & P2Education == 1 ~ 1,
P1Education == 1 & is.na(P2Education) ~ 1,
P1Education == 1 & P2Education == 0 ~ 1,
P1Education == 1 & P2Education == 1 ~ 1))
table(waves$P1Education, waves$P2Education)
table(waves$SES)
"Divorce:"
# 0 = Single/Married/Widowed
# 1 = Divorced/Separated
# NA = NA/Refused
table(waves$PA10)
waves <- waves %>%
mutate(Divorce = case_when(
is.na(PA10) ~ NaN,
PA10 == 96 ~ NaN,
PA10 %in% c(1,2,3) ~ 0,
PA10 %in% c(4,5) ~ 1))
table(waves$Divorce)
"Geography:"
# 0 = Rural
# 1 = Urban/Suburban/Mostly Retail/Mostly Industrial
# NA = NA/Other/Refused/Don't Know/Not Applicable
waves <- waves %>%
mutate(Geography = case_when(
is.na(H1IR12) ~ NaN,
H1IR12 %in% c(96,98,99) ~ NaN,
H1IR12 == 1 ~ 0,
H1IR12 %in% c(2,3,4,5) ~ 1))
table(waves$Geography)
"Gender:"
waves <- waves %>%
mutate(Gender = case_when(
BIO_SEX3 == 1 ~ "Male",
BIO_SEX3 == 2 ~ "Female"))
table(waves$Gender)
"Hispanic:"
# 0 = No
# 1 = Yes
# NA = Refused/Don't Know
table(waves$H1GI4)
table(is.na(waves$H1GI4))
waves <- waves %>%
mutate(Hispanic = case_when(
is.na(H1GI4) ~ NaN,
H1GI4 %in% c(6,8) ~ NaN,
H1GI4 == 0 ~ 0,
H1GI4 == 1 ~ 1))
table(waves$Hispanic)
"Citizenship"
# 0 = No
# 1 = Yes
# NA = Refused/Don't Know
table(waves$H1GI14)
waves <- waves %>%
mutate(Citizenship = case_when(
is.na(H1GI14) ~ NaN,
H1GI14 %in% c(6,8) ~ NaN,
H1GI14 == 0 ~ 0,
H1GI14 == 1 ~ 1,
H1GI14 == 7 ~ 1))
table(waves$Citizenship)
"Juvenile Incarceration:"
# 0 = No
# 1 = Yes
# NA = Missing/NA
waves <- waves %>%
mutate(JIncarceration = case_when(
is.na(H3CJ5) ~ NaN,
H3CJ5 %in% c(96,98,99) ~ NaN,
H3CJ5 == 97 ~ 0,
H3CJ5 %in% seq(1,50) ~ 1))
table(waves$JIncarceration)
table(is.na(waves$JIncarceration))
"Adult Incarceration"
# 0 = No
# 1 = Yes
# NA = Missing/NA
waves <- waves %>%
mutate(AIncarceration = case_when(
is.na(H4CJ6) ~ NaN,
H4CJ6 %in% c(96, 98) ~ NaN,
H4CJ6 == 97 ~ 0,
H4CJ6 %in% seq(1,90) ~ 1))
table(waves$AIncarceration)
table(is.na(waves$AIncarceration))
#########################
variables <- as.data.frame(names(waves))
#########################
"Select only the necessary variables:"
attach(waves)
Waves <- waves %>%
select(AID, PA10, PA12, S1, S6B, S2, S4, IMONTH, IDAY, IYEAR,
H1GI1Y, H1GI6B, H1GI11, H1GI14, H1GI21, H1IR12, H1FV3,
H1GI4, H1JO11, H1DS5, H1DS2, H1TO53, H1DS12, H1DS13, H1DS9,
H2GI10, H2IR12, H2FV1, H2DS10, H2DS11,
H3DS8, H3OD4B, BIO_SEX3, H3HR24, H3HR25, H3ID32,
H3ID30, H3ID29, H3CJ5, H3DS16, H3CJ108A, H3LM7,
H4DS8, H4CJ9I, H4DS1, H4DS19, H4CJ25M, H4DS5, H4DS6, H4DS2,
H4WP28, H4CJ20, H4ED2, H4CJ1, H4CJ6, H4CJ17, H4CJ24M, H4LM11,
PEducation, Race, Age, Geography, Gender, Hispanic, Citizenship,
Divorce, JIncarceration, AIncarceration, FirstIncarcAge,
P1Education, P2Education, SES, JIncarceMonths, AIncarceMonths)
attach(Waves)
Waves <- Waves %>%
rename(Black = S6B,
BirthYear = H1GI1Y)
names(Waves)
rm(wave1)
rm(wave2)
rm(wave3)
rm(wave4)
View(variables)
table(waves$S11)
table(waves$S17)
waves <- waves %>%
mutate(Mother = case_when(
is.na(S11) ~ NaN,
S11 == 9 ~ NaN,
S11 == 0 ~ 0,
S11 == 1 ~ 1)) %>%
mutate(Father = case_when(
is.na(S17) ~ NaN,
S17 == 9 ~ NaN,
S17 == 0 ~ 0,
S17 == 1 ~ 1))
table(waves$Mother, waves$Father)
table(is.na(waves$Mother), is.na(waves$Father))
table(is.na(waves$S11))
waves <- waves %>%
mutate(Mother = case_when(
is.na(S11) ~ NaN,
S11 == 9 ~ NaN,
S11 == 0 ~ 0,
S11 == 1 ~ 1)) %>%
mutate(Father = case_when(
is.na(S17) ~ NaN,
S17 == 9 ~ NaN,
S17 == 0 ~ 0,
S17 == 1 ~ 1)) %>%
mutate(TwoParentHome = case_when(
is.na(Mother) & is.na(Father) ~ NaN,
is.na(Mother) & Father == 0 ~ NaN,
is.na(Mother) & Father == 1 ~ NaN,
Mother == 0 & is.na(Father) ~ NaN,
Mother == 0 & Father == 0 ~ 0,
Mother == 0 & Father == 1 ~ 0,
Mother == 1 & is.na(Father) ~ NaN,
Mother == 1 & Father == 0 ~ 0,
Mother == 1 & Father == 1 ~ 1))
table(waves$Mother, waves$Father)
table(is.na(waves$Mother), is.na(waves$Father))
table(TwoParentHome)
table(waves$TwoParentHome)
# Two Parent Home
table(TwoParentHome)
attach(waves)
Waves <- waves %>%
select(AID, PA10, PA12, S1, S6B, S2, S4, IMONTH, IDAY, IYEAR,
H1GI1Y, H1GI6B, H1GI11, H1GI14, H1GI21, H1IR12, H1FV3,
H1GI4, H1JO11, H1DS5, H1DS2, H1TO53, H1DS12, H1DS13, H1DS9,
H2GI10, H2IR12, H2FV1, H2DS10, H2DS11,
H3DS8, H3OD4B, BIO_SEX3, H3HR24, H3HR25, H3ID32,
H3ID30, H3ID29, H3CJ5, H3DS16, H3CJ108A, H3LM7,
H4DS8, H4CJ9I, H4DS1, H4DS19, H4CJ25M, H4DS5, H4DS6, H4DS2,
H4WP28, H4CJ20, H4ED2, H4CJ1, H4CJ6, H4CJ17, H4CJ24M, H4LM11,
PEducation, Race, Age, Geography, Gender, Hispanic, Citizenship,
Divorce, JIncarceration, AIncarceration, FirstIncarcAge, TwoParentHome,
P1Education, P2Education, SES, JIncarceMonths, AIncarceMonths)
attach(Waves)
Waves <- Waves %>%
rename(Black = S6B,
BirthYear = H1GI1Y)
names(Waves)
Waves <- waves %>%
select(AID, PA10, PA12, S1, S6B, S2, S4, IMONTH, IDAY, IYEAR,
H1GI1Y, H1GI6B, H1GI11, H1GI14, H1GI21, H1IR12, H1FV3,
H1GI4, H1JO11, H1DS5, H1DS2, H1TO53, H1DS12, H1DS13, H1DS9,
H2GI10, H2IR12, H2FV1, H2DS10, H2DS11,
H3DS8, H3OD4B, BIO_SEX3, H3HR24, H3HR25, H3ID32,
H3ID30, H3ID29, H3CJ5, H3DS16, H3CJ108A, H3LM7,
H4DS8, H4CJ9I, H4DS1, H4DS19, H4CJ25M, H4DS5, H4DS6, H4DS2,
H4WP28, H4CJ20, H4ED2, H4CJ1, H4CJ6, H4CJ17, H4CJ24M, H4LM11,
PEducation, Race, Age, Geography, Gender, Hispanic, Citizenship,
Divorce, JIncarceration, AIncarceration, FirstIncarcAge, TwoParentHome,
P1Education, P2Education, SES, JIncarceMonths, AIncarceMonths)
attach(Waves)
Waves <- Waves %>%
rename(Black = S6B,
BirthYear = H1GI1Y)
source('C:/Users/miqui/OneDrive/R Projects/ADD Health/AddHealth.R', echo=TRUE)
attach(waves)
Waves <- waves %>%
select(AID, PA10, PA12, S1, S6B, S2, S4, IMONTH, IDAY, IYEAR,
H1GI1Y, H1GI6B, H1GI11, H1GI14, H1GI21, H1IR12, H1FV3,
H1GI4, H1JO11, H1DS5, H1DS2, H1TO53, H1DS12, H1DS13, H1DS9,
H2GI10, H2IR12, H2FV1, H2DS10, H2DS11,
H3DS8, H3OD4B, BIO_SEX3, H3HR24, H3HR25, H3ID32,
H3ID30, H3ID29, H3CJ5, H3DS16, H3CJ108A, H3LM7,
H4DS8, H4CJ9I, H4DS1, H4DS19, H4CJ25M, H4DS5, H4DS6, H4DS2,
H4WP28, H4CJ20, H4ED2, H4CJ1, H4CJ6, H4CJ17, H4CJ24M, H4LM11,
PEducation, Race, Age, Geography, Gender, Hispanic, Citizenship,
Divorce, JIncarceration, AIncarceration, FirstIncarcAge, TwoParentHome,
P1Education, P2Education, SES, JIncarceMonths, AIncarceMonths)
attach(Waves)
Waves <- Waves %>%
rename(Black = S6B,
BirthYear = H1GI1Y)
names(Waves)
# Two Parent Home
table(TwoParentHome)
round(prop.table(table(TwoParentHome))*100, 1)
table(Gender, TwoParentHome)
round(prop.table(table(Gender, TwoParentHome), margin = 1)*100, 1)
AIJI <- glm(
AIncarceration ~ JIncarceration,
data = Waves,
family = binomial(link = "logit"))
exp(coef(AIJI))
round(prop.table(table(Gender, TwoParentHome), margin = 1)*100, 1)
# Juvenile Incarceration via Age
JIAge <- glm(
JIncarceration ~ Age,
data = Waves,
family = binomial(link = "logit"))
exp(coef(JIAge))
