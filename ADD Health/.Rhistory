# 0 = no job
# 1 = any type of job
# NA = NA/Not Applicable/Refused/Don't Know/No Mother
table(waves$H1RM4)
waves <- waves %>%
mutate(MotherEmployed = case_when(
is.na(H1RM4) ~ NaN,
H1RM4 %in% c(96, 97, 98, 99) ~ NaN,
H1RM4 == 16 ~ 0,
H1RM4 %in% seq(1,15) ~ 1))
table(waves$MotherEmployed)
table(is.na(waves$MotherEmployed))
"Does your father have a job?"
# 0 = no job
# 1 = any type of job
# NA = NA/Not Applicable/Refused/Don't Know/No Father
table(waves$H1RF4)
waves <- waves %>%
mutate(FatherEmployed = case_when(
is.na(H1RF4) ~ NaN,
H1RF4 %in% c(96, 97, 98, 99) ~ NaN,
H1RF4 == 16 ~ 0,
H1RF4 %in% seq(1,15) ~ 1))
table(waves$FatherEmployed)
table(is.na(waves$FatherEmployed))
"Unemployment:"
# 0 = Yes, both parents unemployed
# 1 = At least 1 parent has a job
# NA = NA
waves <- waves %>%
mutate(Unemployment = case_when(
is.na(MotherEmployed) & is.na(FatherEmployed) ~ NaN,
is.na(MotherEmployed) & FatherEmployed == 0 ~ NaN,
MotherEmployed == 0 & is.na(FatherEmployed) ~ NaN,
MotherEmployed == 1 | FatherEmployed == 1 ~ 0,
MotherEmployed == 0 & FatherEmployed == 0 ~ 1))
table(waves$MotherEmployed, waves$FatherEmployed)
table(is.na(waves$MotherEmployed), is.na(waves$FatherEmployed))
table(waves$Unemployment)
table(is.na(waves$Unemployment))
"Mother's Hours Work per Week:"
# NA = 0/Refused/Not Applicable/No Dad
# [1-168] = [1-168]
# 40 = Don't Know
table(waves$H1RM7)
table(is.na(waves$H1RM7))
waves <- waves %>%
mutate(MotherHoursHolder = replace(H1RM7, H1RM7 %in% c(NA, 996, 997, 999), NA)) %>%
mutate(MotherHoursWeek = replace(MotherHoursHolder, MotherHoursHolder == 998, 40))
table(waves$MotherEmployed, waves$H1RM7)
table(is.na(waves$MotherHoursHolder))
summary(waves$MotherHoursWeek)
"Father's Hours Work per Week:"
# NA = 0/Refused/Not Applicable/No Dad
# [1-168] = [1-168]
# 40 = Don't Know
table(waves$H1RF7)
table(is.na(waves$H1RF7))
waves <- waves %>%
mutate(FatherHoursHolder = replace(H1RF7, H1RF7 %in% c(NA, 996, 997, 999), NA)) %>%
mutate(FatherHoursWeek = replace(FatherHoursHolder, FatherHoursHolder == 998, 40))
table(waves$FatherEmployed, waves$H1RF7)
table(is.na(waves$FatherHoursHolder))
summary(waves$FatherHoursWeek)
"Mother Regular Overtime?"
# 0 = No
# 1 = Yes, usually over 40 hours per week
waves <- waves %>%
mutate(MotherOvertime = case_when(
is.na(MotherHoursWeek) ~ NaN,
MotherHoursWeek <= 40 ~ 0,
MotherHoursWeek > 40 ~ 1))
table(waves$MotherOvertime)
table(is.na(waves$MotherOvertime))
"Father Regular Overtime?"
# 0 = No
# 1 = Yes, usually over 40 hours per week
waves <- waves %>%
mutate(FatherOvertime = case_when(
is.na(FatherHoursWeek) ~ NaN,
FatherHoursWeek <= 40 ~ 0,
FatherHoursWeek > 40 ~ 1))
table(waves$FatherOvertime)
table(is.na(waves$FatherOvertime))
"W1 Grade:"
table(waves$S3) # What grade are you in?
table(waves$H1GI20) # What grade are you in?
table(is.na(waves$H1GI20))
waves <- waves %>%
mutate(W1Grade = replace(H1GI20, H1GI20 %in% c(NA, 96, 97, 98, 99), NaN))
table(waves$W1Grade)
table(is.na(waves$W1Grade))
"W1 Grade Level:"
waves <- waves %>%
mutate(W1GradeLevel = case_when(
W1Grade %in% c(7,8) ~ "Middle",
W1Grade %in% c(9,10,11,12) ~ "High"))
table(waves$W1GradeLevel)
table(waves$W1Grade)
"W2 Grade:"
# 7-12
# 13 = Beyond High School
# NA = NA/Not in School/Don't Know/No Grades
table(waves$H2GI9) # What grade are you in?
waves <- waves %>%
mutate(W2Grade = replace(H2GI9, H2GI9 %in% c(NA, 14, 97, 98), NA))
table(waves$W2Grade)
table(is.na(waves$W2Grade))
"W2 Grade Level:"
waves <- waves %>%
mutate(W2GradeLevel = case_when(
W2Grade %in% c(7,8) ~ "Middle",
W2Grade %in% c(9,10,11,12) ~ "High",
W2Grade == 13 ~ "Beyond"))
table(waves$W2GradeLevel)
table(waves$W2Grade)
"Family Size:"
# 1 = Lives by self
# 6 = 6 or more people
table(waves$S27)
waves <- waves %>%
mutate(FamilySize = replace(S27, S27 %in% c(7, 99), NA))
table(waves$FamilySize)
"Death:"
# 0 = no parent has died
# 1 = a parent has died
table(waves$H1NM3)
table(waves$H1NF3)
waves <- waves %>%
mutate(MotherHolder = replace(H1NM3, H1NM3 %in% c(NA, 96, 98), NA)) %>%
mutate(MotherAlive = case_when(
MotherHolder %in% seq(0, 18) ~ 0,
MotherHolder == 97 ~ 1))
waves <- waves %>%
mutate(FatherHolder = replace(H1NF3, H1NF3 %in% c(NA, 98), NA)) %>%
mutate(FatherAlive = case_when(
FatherHolder %in% seq(0, 18) ~ 0,
FatherHolder == 97 ~ 1))
table(waves$MotherAlive)
table(waves$FatherAlive)
waves <- waves %>%
mutate(Death = case_when(
is.na(MotherAlive) ~ NaN,
is.na(FatherAlive) ~ NaN,
MotherAlive == 0 ~ 1,
FatherAlive == 0 ~ 1,
MotherAlive == 1 & FatherAlive == 1 ~ 0))
table(waves$Death)
"Highest Grade Completed:"
# Continuous
# Only middle school and above
# Anything higher than grade 12 is grade 12
table(highgrade15)
table(waves$H3ED1)
waves <- waves %>%
mutate(HighestGrade = replace(H3ED1, H3ED1 %in% c(97, 98, 99), NA)) %>%
mutate(HighGrade15 = replace(HighestGrade, HighestGrade %in% c(13,14,15,16,17,18,19,20,21,22), 12))
table(waves$HighestGrade)
table(waves$HighGrade15)
"Did you dropout of Middle School?:"
# 0 = No
# 1 = Yes
table(waves$HighGrade15)
waves <- waves %>%
mutate(MiddleDropout = case_when(
is.na(HighGrade15) ~ NaN,
HighGrade15 %in% c(6,7) ~ 1,
TRUE ~ 0))
table(waves$MiddleDropout)
"Did you drop out of High School?:"
waves <- waves %>%
mutate(HighDropout = case_when(
is.na(HighGrade15) ~ NaN,
HighGrade15 %in% c(8,9,10,11) ~ 1,
TRUE ~ 0))
table(waves$HighDropout)
"Have you ever been suspended?"
# 0 = No
# 1 = Yes
table(waves$H1ED7)
waves <- waves %>%
mutate(EverSuspend = replace(H1ED7, H1ED7 %in% c(6, 8), NA))
table(waves$EverSuspend)
"Grade of Last Suspension:"
table(waves$H1ED8)
table(waves$EverSuspend, waves$H1ED8)
waves <- waves %>%
mutate(SuspendGrade = replace(H1ED8, H1ED8 %in% c(96, 97, 98, 99), NA))
table(waves$SuspendGrade)
"Elementary School Suspend:"
# 0 = No
# 1 = Yes
waves <- waves %>%
mutate(ESuspend = case_when(
SuspendGrade %in% seq(1, 5) ~ 1,
TRUE ~ 0))
table(waves$ESuspend)
"Middle School Suspend:"
# 0 = No
# 1 = Yes
waves <- waves %>%
mutate(MSuspend = case_when(
SuspendGrade %in% c(6, 7, 8) ~ 1,
TRUE ~ 0))
table(waves$MSuspend)
"High School Suspend:"
# 0 = No
# 1 = Yes
waves <- waves %>%
mutate(HSuspend = case_when(
SuspendGrade %in% c(9, 10, 11, 12) ~ 1,
TRUE ~ 0))
table(waves$HSuspend)
"Expulsion from School:"
# 0 = No
# 1 = Yes
table(waves$H1ED9)
waves <- waves %>%
mutate(Expel = replace(H1ED9, H1ED9 %in% c(6, 8), NA))
table(waves$Expel)
"Aggressive Delinquency (AD):"
# 0 = Never
# 1 = Once
# 2 = More than once
# 1. Getting into a serious physical fight
# 2. Pulling a knife/gun on someone
# 3. Shooting or stabbing someone
table(waves$H1DS5) # Serious physical fight
table(waves$H1FV7) # Pulling a knife/gun on someone
table(waves$H1FV8) # Shooting or stabbing someone
# 0 = Zero days
# 1 = One day
# 2 = Two or Three days
# 3 = Four or Five days
# 4 = Six or more days
table(waves$H1FV9) # Carrying a weapon to school
"Non-aggressive Delinquency (NAD):"
# 0 = Never
# 1 = 1 or 2 times
# 2 = 3 or 4 times
# 3 = 5 or more times
# 1. Lying about whereabouts
# 2. Shoplifting
# 3. Stealing less than $50
# 4. Stealing more than $50
table(waves$H1DS3) # Lying about whereabouts
table(waves$H1DS4) # Shoplifting
table(waves$H1DS13) # Stealing less than $50
table(waves$H1DS9) # Stealing more than $50
"Fixing the variables to remove Refused/Don't Know/Not Applicable"
waves <- waves %>%
mutate(ADPhysicalFight = replace(H1DS5, H1DS5 %in% c(6,8,9), NA)) %>%
mutate(ADKnifeGun = replace(H1FV7, H1FV7 %in% c(6,8,9), NA)) %>%
mutate(ADShootStab = replace(H1FV8, H1FV8 %in% c(6,8,9), NA)) %>%
mutate(ADWeaponSchool = replace(H1FV9, H1FV9 %in% c(6,8,9), NA)) %>%
mutate(NADLying = replace(H1DS5, H1DS5 %in% c(6,8,9), NA)) %>%
mutate(NADShoplift = replace(H1DS4, H1DS4 %in% c(6,8,9), NA)) %>%
mutate(NADStealLess = replace(H1DS13, H1DS13 %in% c(6,8,9), NA)) %>%
mutate(NADStealMore = replace(H1DS9, H1DS9 %in% c(6,8,9), NA))
# Aggressive Delinquency
table(waves$ADPhysicalFight)
table(waves$ADKnifeGun)
table(waves$ADShootStab)
table(waves$ADWeaponSchool)
# Non-aggressive Delinquency
table(waves$NADLying)
table(waves$NADShoplift)
table(waves$NADStealLess)
table(waves$NADStealMore)
"Creating Generalized Delinquency Variables:"
# Just sum them up for a general delinquency score?
# Max possible aggressive delinquency is 16
# Max possible non-aggressive delinquency score is 12
waves <- waves %>%
mutate(AggDelinq = ADPhysicalFight + ADKnifeGun + ADShootStab + ADWeaponSchool) %>%
mutate(NonAggDelinq = NADLying + NADShoplift + NADStealLess + NADStealMore)
table(waves$AggDelinq)
table(waves$NonAggDelinq)
###############################
###  Attachment to Parents  ###
###############################
"Attachment to parents (AtP):"
# 1 = Not at all
# 5 = Very much
# 1. How close do you feel to your mother?
# 2. How close do you feel to your father?
# 3. How much do you think she cares about you?
# 4. How much do you think he cares about you?
table(waves$H1WP9) # Close to mother
table(waves$H1WP13) # Close to father
table(waves$H1WP10) # Mother cares about you
table(waves$H1WP14) # Father cares about you
"Fixing the variables to remove Refused/Don't Know/Not Applicable:"
waves <- waves %>%
mutate(AtPCloseMother = replace(H1WP9, H1WP9 %in% c(6, 7, 8, 9), NA)) %>%
mutate(AtPCloseFather = replace(H1WP13, H1WP13 %in% c(6, 7, 8, 9), NA)) %>%
mutate(AtPMotherCare = replace(H1WP10, H1WP10 %in% c(6, 7, 8, 9), NA)) %>%
mutate(AtPFatherCare = replace(H1WP14, H1WP14 %in% c(6, 7, 8, 9), NA))
table(waves$AtPCloseMother)
table(waves$AtPCloseFather)
table(waves$AtPMotherCare)
table(waves$AtPFatherCare)
"Create the Attachment to Parents variable:"
waves <- waves %>%
mutate(AttachParents = AtPCloseMother + AtPCloseFather + AtPMotherCare + AtPFatherCare)
table(waves$AttachParents)
###############################
###  Attachment to School   ###
###############################
"Attachment to School (AtS):"
# Note: You have to reverse the order of the responses (6-i)
# 1 = Not at all
# 5 = Very much
# 1. I feel close to people at school
# 2. I am happy to be at school
# 3. The teachers treat students fairly
# 4. I feel like I am part of the school
table(waves$H1ED19) # Close to people at school
table(waves$H1ED22) # Happy to be at school
table(waves$H1ED23) # Treat students fairly
table(waves$H1ED20) # Part of the school
"Fixing the variables to remove Refused/Don't Know/Not Applicable:"
waves <- waves %>%
mutate(AtSClose = replace(H1ED19, H1ED19 %in% c(6, 7, 8), NA)) %>%
mutate(AtSHappy = replace(H1ED22, H1ED22 %in% c(6, 7, 8), NA)) %>%
mutate(AtSFairly = replace(H1ED23, H1ED23 %in% c(6, 7, 8), NA)) %>%
mutate(AtSPartOf = replace(H1ED20, H1ED20 %in% c(6, 7, 8), NA))
# Reversing the Likert scale:
waves <- waves %>%
mutate(AtSClose = 6-AtSClose) %>%
mutate(AtSHappy = 6-AtSHappy) %>%
mutate(AtSFairly = 6-AtSFairly) %>%
mutate(AtSPartOf = 6-AtSPartOf)
# Attachment to School
table(waves$AtSClose)
table(waves$AtSHappy)
table(waves$AtSFairly)
table(waves$AtSPartOf)
##########################################
###  Attachment to Delinquent Peers   ###
##########################################
"Attachment to Delinquent Peers (AtDP):"
# Asked to 3 best friends of the respondent
# 0 = Zero friends
# 3 = All 3 friends
# 6-9 = NA
# 1. Smoke at least 1 cigarette a day
# 2. Drank alcohol at least once per month
# 3. Used marijuana at least once per month
table(waves$H1TO9)  # Cigarette
table(waves$H1TO29) # Alcohol
table(waves$H1TO33) # Marijuana
waves <- waves %>%
mutate(AtDPCigs = replace(H1TO9, H1TO9 %in% c(6, 8, 9), NA)) %>%
mutate(AtDPAlcohol = replace(H1TO29, H1TO29 %in% c(6, 8, 9), NA)) %>%
mutate(AtDPWeed = replace(H1TO33, H1TO33 %in% c(6, 8, 9), NA))
# Attachment to Delinquent Peers
table(waves$AtDPCigs)
table(waves$AtDPAlcohol)
table(waves$AtDPWeed)
"Creating the Attachment to Delinquent Peers variable:"
waves <- waves %>%
mutate(AtDelinqPeers = AtDPCigs + AtDPAlcohol + AtDPWeed)
table(waves$AtDelinqPeers)
###############################
###  Academic Performance   ###
###############################
"Academic Performance (AP):"
# 1 = D
# 2 = C
# 3 = B
# 4 = A
# 1. Grade in English/Language Arts
# 2. Grade in Mathematics
# 3. Grade in History/Social Studies
# 4. Grade in Science
table(waves$H1ED11) # English
table(waves$H1ED12) # Math
table(waves$H1ED13) # History
table(waves$H1ED14) # Science
"Fixing the variables to remove Refused/Don't Know/Not Applicable/Other:"
waves <- waves %>%
mutate(APEnglish = replace(H1ED11, H1ED11 %in% c(5, 6, 96, 97, 98, 99), NA)) %>%
mutate(APMath = replace(H1ED12, H1ED12 %in% c(5, 6, 96, 97, 98, 99), NA)) %>%
mutate(APHistory = replace(H1ED13, H1ED13 %in% c(5, 6, 96, 97, 98, 99), NA)) %>%
mutate(APScience = replace(H1ED14, H1ED14 %in% c(5, 6, 96, 97, 98, 99), NA))
# Academic Performance:
table(waves$APEnglish)
table(waves$APMath)
table(waves$APHistory)
table(waves$APScience)
"Reversing the grading:"
waves <- waves %>%
mutate(APEnglish = 5-APEnglish,
APMath = 5-APMath,
APHistory = 5-APHistory,
APScience = 5-APScience)
# Academic Performance:
table(waves$APEnglish)
table(waves$APMath)
table(waves$APHistory)
table(waves$APScience)
waves <- waves %>%
mutate(AcadPerform = APEnglish + APMath + APHistory + APScience)
summary(waves$AcadPerform)
"Juvenile Incarceration:"
# 0 = No
# 1 = Yes
# NA = Missing/NA
waves <- waves %>%
mutate(JIncarceration = case_when(
is.na(H3CJ5) ~ NaN,
H3CJ5 %in% c(96,98,99) ~ NaN,
H3CJ5 == 97 ~ 0,
H3CJ5 %in% seq(1,50) ~ 1))
table(waves$JIncarceration)
table(is.na(waves$JIncarceration))
"Adult Incarceration"
# 0 = No
# 1 = Yes
# NA = Missing/NA
waves <- waves %>%
mutate(AIncarceration = case_when(
is.na(H4CJ6) ~ NaN,
H4CJ6 %in% c(96, 98) ~ NaN,
H4CJ6 == 97 ~ 0,
H4CJ6 %in% seq(1,90) ~ 1))
table(waves$AIncarceration)
table(is.na(waves$AIncarceration))
#########################
variables <- as.data.frame(names(waves))
#########################
"Select only the necessary variables:"
attach(waves)
Waves <- waves %>%
select(AID, PA10, PA12, S1, S6B, S2, S4, IMONTH, IDAY, IYEAR,
H1GI1Y, H1GI6B, H1GI11, H1GI14, H1GI21, H1IR12, H1FV3,
H1GI4, H1JO11, H1DS5, H1DS2, H1TO53, H1DS12, H1DS13, H1DS9,
H2GI10, H2IR12, H2FV1, H2DS10, H2DS11, H3DA31,
H3DS8, H3OD4B, BIO_SEX3, H3HR24, H3HR25, H3ID32,
H3ID30, H3ID29, H3CJ5, H3DS16, H3CJ108A, H3LM7,
H4DS8, H4CJ9I, H4DS1, H4DS19, H4CJ25M, H4DS5, H4DS6, H4DS2,
H4WP28, H4CJ20, H4ED2, H4CJ1, H4CJ6, H4CJ17, H4CJ24M, H4LM11, H1FV7, H1FV8,
H1FV9, H1DS5, H1DS4, H1DS13, H1DS9,
H1WP9, H1WP13, H1WP10, H1WP14, H1ED19,
H1ED20, H1ED22, H1ED23, H1TO33, H1TO9,
H1TO29, H1ED11, H1ED12, H1ED13, H1ED14,
PEducation, Race, Age, Geography, Gender, Hispanic, Citizenship, EverSuspend,
Divorce, JIncarceration, AIncarceration, FirstIncarcAge, TwoParentHome,
P1Education, P2Education, SES, JIncarceMonths, AIncarceMonths, AEmployed,
MotherEmployed, FatherEmployed, Unemployment, MotherHoursWeek, FatherHoursWeek,
MotherOvertime, FatherOvertime, W1Grade, W1GradeLevel, W2Grade, W2GradeLevel,
MiddleDropout, HighDropout, FamilySize, Death, HighestGrade, HighGrade15,
SuspendGrade, ESuspend, MSuspend, HSuspend, Expel, ADPhysicalFight, ADKnifeGun,
ADShootStab, ADWeaponSchool, NADLying, NADShoplift,
NADStealLess, NADStealMore, AtPCloseMother,
AtPCloseFather, AtPMotherCare, AtPFatherCare,
AtSClose, AtSHappy, AtSPartOf, AtSFairly,
AtDPCigs, AtDPAlcohol, AtDPWeed, APEnglish,
APMath, APHistory, APScience, AggDelinq,
NonAggDelinq, AttachParents, AtDelinqPeers, AcadPerform)
attach(Waves)
"Rename some of the variables:"
#New = Old
Waves <- Waves %>%
rename(Black = S6B,
BirthYear = H1GI1Y)
names(Waves)
table(Gender)
str(Gender)
table(waves$H4SE35)
table(waves$H1FV3)
rm(wave1)
rm(wave2)
rm(wave3)
rm(wave4)
table(waves$H1FV6)
table(waves$H2FV5)
table(waves$H3DS18F)
table(waves$H3DS18G)
table(waves$H4DS18)
table(waves$H3DS18D)
table(waves$H4DS16)
table(waves$H3DS18B)
table(waves$H3DS18C)
table(waves$H4DS15)
table(waves$H4DS14)
# 1. You were shot/stabbed:
table(waves$H1FV3)
table(waves$H1FV4)
table(waves$H2FV3)
table(waves$H2FV4)
table(waves$H3DS18D)
table(waves$H3DS18E)
table(waves$H4DS16)
# 2. You were jumped variables:
table(waves$H1FV6)
table(waves$H2FV5)
table(waves$H3DS18F)
table(waves$H3DS18G)
table(waves$H4DS18)
# 3. You had a knife/gun pulled on you:
table(waves$H1FV2)
table(waves$H2FV2)
table(waves$H3DS18B)
table(waves$H3DS18C)
table(waves$H4DS15)
# 4. You saw someone get shot/stabbed:
table(waves$H1FV1)
table(waves$H2FV1)
table(waves$H3DS18A)
table(waves$H4DS14)
