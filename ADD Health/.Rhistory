# 3. You had a knife/gun pulled on you:
waves <- waves %>%
mutate(JH1FV2 = case_when(
H1FV2 %in% c(6, 8, 9) ~ NaN,
H1FV2 %in% c(1, 2) ~ 1,
TRUE ~ 0)) %>%
mutate(JH2FV2 = case_when(
H2FV2 %in% c(6, 8) ~ NaN,
H2FV2 %in% c(1, 2) ~ 1,
TRUE ~ 0)) %>%
mutate(AH3DS18B = replace(H3DS18B, H3DS18B %in% c(NA, 6, 8, 9), NA)) %>%
mutate(AH3DS18C = replace(H3DS18C, H3DS18C %in% c(NA, 6, 8, 9), NA)) %>%
mutate(AH4DS15 = replace(H4DS15, H4DS15 %in% c(NA, 6, 8), NA))
table(waves$JH1FV2)
table(waves$JH2FV2)
table(waves$AH3DS18B)
table(waves$AH3DS18C)
table(waves$AH4DS15)
# 4. You saw someone get shot/stabbed:
waves <- waves %>%
mutate(JH1FV1 = case_when(
H1FV1 %in% c(6, 8, 9) ~ NaN,
H1FV1 %in% c(1, 2) ~ 1,
TRUE ~ 0)) %>%
mutate(JH2FV1 = case_when(
H2FV1 %in% c(6, 8) ~ NaN,
H2FV1 %in% c(1, 2) ~ 1,
TRUE ~ 0)) %>%
mutate(AH3DS18A = case_when(
H3DS18A %in% c(6, 8, 9) ~ NaN,
H3DS18A == 1 ~ 1,
TRUE ~ 0)) %>%
mutate(AH4DS14 = replace(H4DS14, H4DS14 %in% c(NA, 6, 8), NA))
table(waves$JH1FV1)
table(waves$JH2FV1)
table(waves$AH3DS18A)
table(waves$AH4DS14)
"Creating the Juvenile Victim Variable:"
table(waves$JH1FV3)
table(waves$JH1FV4)
table(waves$JH2FV3)
table(waves$JH2FV4)
table(waves$JH1FV6)
table(waves$JH2FV5)
table(waves$JH1FV2)
table(waves$JH2FV2)
table(waves$JH1FV1)
table(waves$JH2FV1)
waves <- waves %>%
mutate(JVictim = case_when(
JH1FV3 == 1 | JH1FV4 == 1 |
JH2FV3 == 1 | JH2FV4 == 1 |
JH1FV6 == 1 | JH2FV5 == 1 |
JH1FV2 == 1 | JH2FV2 == 1 |
JH1FV1 == 1 | JH2FV1 == 1 ~ 1,
TRUE ~ 0))
table(waves$JVictim)
test <-  waves %>%
select(JH1FV3, JH1FV4, JH2FV3, JH2FV4, JH1FV6,
JH2FV5, JH1FV2, JH2FV2, JH1FV1, JH2FV1) %>%
mutate(Total = rowSums(.[1:10],na.rm = TRUE))
table(test$Total)
"Creating the Adult Victim Variable:"
table(waves$AH3DS18D)
table(waves$AH3DS18E)
table(waves$AH4DS16)
table(waves$AH3DS18F)
table(waves$AH3DS18G)
table(waves$AH4DS18)
table(waves$AH3DS18B)
table(waves$AH3DS18C)
table(waves$AH4DS15)
table(waves$AH3DS18A)
table(waves$AH4DS14)
waves <- waves %>%
mutate(AVictim = case_when(
AH3DS18D == 1 | AH3DS18E == 1 | AH4DS16 == 1 |
AH3DS18F == 1 | AH3DS18G == 1 | AH4DS18 == 1 |
AH3DS18B == 1 | AH3DS18C == 1 | AH4DS15 == 1 |
AH3DS18A == 1 | AH4DS14 == 1 ~ 1,
TRUE ~ 0))
table(waves$AVictim)
test <-  waves %>%
select(AH3DS18D, AH3DS18E, AH4DS16, AH3DS18F, AH3DS18G, AH4DS18,
AH3DS18B, AH3DS18C, AH4DS15, AH3DS18A, AH4DS14) %>%
mutate(Total = rowSums(.[1:11], na.rm = TRUE))
table(test$Total)
"Creating the Victim Variable:"
# 0 = Was Not a youth or adult victim
# 1 = Was a youth or adult victim
waves <- waves %>%
mutate(Victim = case_when(
JVictim == 1 | AVictim == 1 ~ 1,
TRUE ~ 0))
table(waves$Victim)
table(waves$JVictim, waves$AVictim) # Check if TRUE
"Can't Pay your Bills: "
# 0 = can pay bills
# 1 = can't pay bills
table(waves$PA56)
waves <- waves %>%
mutate(CantPayBills = case_when(
PA56 %in% c(NA, 6) ~ NaN,
PA56 == 0 ~ 1,
PA56 == 1 ~ 0))
table(waves$CantPayBills)
###################
### TRAUMA Vars ###
###################
"Neglect:"
table(waves$H3MA2) # basic needs
table(waves$H3MA1) # left home alone
# Basic Needs
waves <- waves %>%
mutate(BasicNeeds = case_when(
H3MA2 %in% c(NA, 96, 98, 99) ~ NaN,
H3MA2 %in% c(1, 2, 3, 4, 5) ~ 1,
TRUE ~ 0))
table(waves$BasicNeeds)
# Left Home Alone
waves <- waves %>%
mutate(HomeAlone = case_when(
H3MA1 %in% c(NA, 96, 98, 99) ~ NaN,
H3MA1 %in% c(1, 2, 3, 4, 5) ~ 1,
H3MA1 == 6 ~ 0))
table(waves$HomeAlone)
"Physical Abuse:"
table(waves$H3MA3) # slapped/hit/kicked
waves <- waves %>%
mutate(SlapHitKick = case_when(
H3MA3 %in% c(NA, 96, 98, 99) ~ NaN,
H3MA3 %in% c(1, 2, 3, 4, 5) ~ 1,
H3MA3 == 6 ~ 0))
table(waves$SlapHitKick)
"Sexual Abuse:"
table(waves$H3MA4) # touched in sexual way
waves <- waves %>%
mutate(Touched = case_when(
H3MA4 %in% c(NA, 96, 98, 99, 0) ~ NaN,
H3MA4 %in% c(1, 2, 3, 4, 5) ~ 1,
H3MA4 == 6 ~ 0))
table(waves$Touched)
"Emotional Abuse:"
table(waves$H4MA1) # hurt your feelings/feel unloved
waves <- waves %>%
mutate(HurtFeelings = case_when(
H4MA1 %in% c(NA, 96, 98) ~ NaN,
H4MA1 %in% c(1, 2, 3, 4, 5) ~ 1,
H4MA1 == 6 ~ 0))
table(waves$HurtFeelings)
"Parental Incarceration:"
table(waves$H4WP9) # Bio Father jail
table(waves$H4WP3) # Bio Mother jail
table(waves$H4WP30) # Father Figure jail
table(waves$H4WP16) # Mother Figure jail
# Bio Father Jail
waves <- waves %>%
mutate(BioFatherJail = replace(H4WP9, H4WP9 %in% c(6, 8), NA))
table(waves$BioFatherJail)
# Bio Mother Jail
waves <- waves %>%
mutate(BioMotherJail = replace(H4WP3, H4WP3 %in% c(6, 8), NA))
table(waves$BioMotherJail)
# Father Figure Jail
waves <- waves %>%
mutate(FigFatherJail = replace(H4WP30, H4WP30 %in% c(6, 7, 8), NA))
table(waves$FigFatherJail)
# Mother Figure Jail
waves <- waves %>%
mutate(FigMotherJail = replace(H4WP16, H4WP16 %in% c(7, 8), NA))
table(waves$FigMotherJail)
"Parent Binge Drinker:"
# More 5 drinks on one occasion
table(waves$PA62)
waves <- waves %>%
mutate(BingeDrink = case_when(
PA62 %in% c(NA, 96) ~ NaN,
PA62 %in% c(2, 3, 4, 5, 6) ~ 1,
PA62 == 1 ~ 0))
table(waves$BingeDrink)
"Creating the Trauma variable:"
# 0 = no traumas experienced
# 1 = at least 1 trauma experienced
waves <- waves %>%
mutate(Trauma = case_when(
JVictim == 1 | BasicNeeds == 1 | HomeAlone == 1 |
SlapHitKick == 1 | Touched == 1 | HurtFeelings == 1 |
BioFatherJail == 1 | BioMotherJail == 1 | FigFatherJail == 1 |
FigMotherJail == 1 | BingeDrink ==1 ~ 1,
TRUE ~ 0))
table(waves$Trauma)
"Homeless:"
# 0 = never been homeless
# 1 = has been homeless at least once
# NA = Skip/Don't Know/NA
waves <- waves %>%
mutate(Homeless = replace(H3HR24, H3HR24 %in% c(7, 8, 9), NA))
table(waves$Homeless)
"Adult Delinquency:"
# Non-aggressive Adult Delinquency:
table(waves$H4DS2) # Steal More $50
table(waves$H4DS6) # Steal Less $50
table(waves$H4DS8) # Steal Property
table(waves$H4DS1) # Damage others property
# Aggressive Adult Delinquency:
table(waves$H4DS20) # Shot / Stabbed someone
table(waves$H4DS11) # Got into a serious physical fight
table(waves$H4DS19) # You pulled a knife/gun on someone
table(waves$H4DS5) # Sold drugs
"Fixing the variables to remove Refused/Don't Know/Not Applicable"
"Adult Steal More than $50:"
waves <- waves %>%
mutate(AStealMore = case_when(
H4DS2 %in% c(6, 8) ~ NaN,
H4DS2 == 0 ~ 0,
H4DS2 %in% c(1, 2, 3) ~ 1))
table(waves$AStealMore)
"Adult Steal Less than $50:"
waves <- waves %>%
mutate(AStealLess = case_when(
H4DS6 %in% c(6, 8) ~ NaN,
H4DS6 == 0 ~ 0,
H4DS6 %in% c(1, 2, 3) ~ 1))
table(waves$AStealLess)
"Adult Steal Property:"
waves <- waves %>%
mutate(AStealProperty = case_when(
H4DS8 %in% c(6, 8) ~ NaN,
H4DS8 == 0 ~ 0,
H4DS8 %in% c(1, 2, 3) ~ 1))
table(waves$AStealProperty)
"Adult Damage Other Property:"
waves <- waves %>%
mutate(ADamageProperty = case_when(
H4DS1 %in% c(6, 8) ~ NaN,
H4DS1 == 0 ~ 0,
H4DS1 %in% c(1, 2, 3) ~ 1))
table(waves$ADamageProperty)
"Adult Shoot/Stab Someone:"
waves <- waves %>%
mutate(AShootStab = replace(H4DS20, H4DS20 %in% c(NA, 6, 8), NA))
table(waves$AShootStab)
" Adult Serious Physical Fight:"
waves <- waves %>%
mutate(APhysicalFight = case_when(
H4DS11 %in% c(6, 8) ~ NaN,
H4DS11 == 0 ~ 0,
H4DS11 %in% c(1, 2, 3) ~ 1))
table(waves$APhysicalFight)
"Adult Pulled a Knife/Gun on Someone"
waves <- waves %>%
mutate(AKnifeGun = replace(H4DS19, H4DS19 %in% c(NA, 6, 8), NA))
table(waves$AKnifeGun)
"Adult Sell Drugs:"
waves <- waves %>%
mutate(ASellDrugs = case_when(
H4DS5 %in% c(6, 8) ~ NaN,
H4DS5 == 0 ~ 0,
H4DS5 %in% c(1, 2, 3) ~ 1))
table(waves$ASellDrugs)
"Foster Home:"
waves <- waves %>%
mutate(FosterHome = replace(H3OD31, H3OD31 %in% c(NA, 6, 8, 9), NA))
table(waves$FosterHome)
"Juvenile Delinquency:
The prefix will be JD"
# Drunk Driving:
table(waves$H1JO9)
waves <- waves %>%
mutate(JDDriveDrunk = case_when(
H1JO9 %in% c(6, 8) ~  NaN,
H1JO9 %in% c(0, 7) ~ 0,
H1JO9 == 1 ~ 1))
table(waves$JDDriveDrunk)
#############
### Drugs ###
#############
# Driven while High on Drugs:
waves <- waves %>%
mutate(JDDriveHigh = case_when(
H1JO19 %in% c(6, 8) ~ NaN,
H1JO19 %in% c(0, 7) ~ 0,
H1JO19 == 1 ~ 1))
table(waves$JDDriveHigh)
# Sell Marijuana / Other Drugs in Wave 1:
waves <- waves %>%
mutate(JDSellDrugs = case_when(
H1DS12 %in% c(6, 8, 9) ~ NaN,
H1DS12 == 0 ~ 0,
H1DS12 %in% c(1,2,3) ~ 1))
table(waves$JDSellDrugs)
# Use illegal drugs in past 30 days:
waves <- waves %>%
mutate(JDIllegalDrugUse = case_when(
H1TO42 %in% c(996, 998, 999) ~ NaN,
H1TO42 %in% c(0, 997) ~ 0,
H1TO42 %in% seq(1, 900) ~ 1))
table(waves$JDIllegalDrugUse)
# Cocaine use:
waves <- waves %>%
mutate(JDCocaineUse = case_when(
H1TO35 %in% c(996, 998, 999) ~ NaN,
H1TO35 == 997 ~ 0,
TRUE ~ 1))
table(waves$JDCocaineUse)
# Using illegal drugs via a Needle:
waves <- waves %>%
mutate(JDIllegalDrugNeedle = case_when(
H1TO43 %in% c(6, 8, 9) ~ NaN,
H1TO43 %in% c(0, 7) ~ 0,
H1TO43 == 1 ~ 1))
table(waves$JDIllegalDrugNeedle)
# Alone first time drug use:
waves <- waves %>%
mutate(JDAloneDrugUse = case_when(
H1JO24 %in% c(6, 8) ~ NaN,
H1JO24 %in% c(0, 7) ~ 0,
H1JO24 == 1 ~ 1))
table(waves$JDAloneDrugUse)
# Fight while on drugs:
waves <- waves %>%
mutate(JDFightOnDrugs = case_when(
H1JO21 %in% c(6, 8) ~ NaN,
H1JO21 %in% c(0, 7) ~ 0,
H1JO21 == 1 ~ 1))
table(waves$JDFightOnDrugs)
# Carrying a weapon while on drugs:
waves <- waves %>%
mutate(JDWeaponOnDrugs = case_when(
H1JO23 %in% c(6, 8) ~ NaN,
H1JO23 %in% c(0, 7) ~ 0,
H1JO23 == 1 ~ 1))
table(waves$JDWeaponOnDrugs)
################
### STEALING ###
################
# Stealing something less than $50:
waves <- waves %>%
mutate(JDStealLess = case_when(
H1DS13 %in% c(6, 8, 9) ~ NaN,
H1DS13 == 0 ~ 0,
H1DS13 %in% c(1, 2, 3) ~ 1))
table(waves$JDStealLess)
# Stealing something more than $50 in past 12 months:
waves <- waves %>%
mutate(JDStealMore = case_when(
H1DS9 %in% c(6, 8, 9) ~ NaN,
H1DS9 == 0 ~ 0,
H1DS9 %in% c(1, 2, 3) ~ 1))
table(waves$JDStealMore)
# Stealing from a store:
waves <- waves %>%
mutate(JDStealStore = case_when(
H1DS4 %in% c(6, 8, 9) ~ NaN,
H1DS4 == 0 ~ 0,
H1DS4 %in% c(1, 2, 3) ~ 1))
table(waves$JDStealStore)
#############
### OTHER ###
#############
# Pulled a knife/gun on someone past 12 months:
waves <- waves %>%
mutate(JDKnifeGun = case_when(
H1FV7 %in% c(6, 8, 9) ~ NaN,
H1FV7 == 0 ~ 0,
H1FV7 %in% c(1, 2) ~ 1))
table(waves$JDKnifeGun)
# You shot/stabbed someone past 12 months:
waves <- waves %>%
mutate(JDShootStab = case_when(
H1FV8 %in% c(6, 8, 9) ~ NaN,
H1FV8 == 0 ~ 0,
H1FV8 %in% c(1, 2) ~ 1))
table(waves$JDShootStab)
# Lie to parents/guardians about whereabouts past 12 months:
waves <- waves %>%
mutate(JDLying = case_when(
H1DS3 %in% c(6, 8, 9) ~ NaN,
H1DS3 == 0 ~ 0,
H1DS3 %in% c(1, 2, 3) ~ 1))
table(waves$JDLying)
# Physical Fight past 12 months:
waves <- waves %>%
mutate(JDPhysicalFight = case_when(
H1JO11 %in% c(6, 8) ~ NaN,
H1JO11 %in% c(0, 7) ~ 0,
H1JO11 == 1 ~ 1))
table(waves$JDPhysicalFight)
# Serious Physical Fight past 12 months:
waves <- waves %>%
mutate(JDSeriousPhysicalFight = case_when(
H1DS5 %in% c(6, 8, 9) ~ NaN,
H1DS5 == 0 ~ 0,
H1DS5 %in% c(1, 2, 3) ~ 1))
table(waves$JDSeriousPhysicalFight)
# Damage Property past 12 months:
waves <- waves %>%
mutate(JDDamageProperty = case_when(
H1DS2 %in% c(6, 8, 9) ~ NaN,
H1DS2 == 0 ~ 0,
H1DS2 %in% c(1, 2, 3) ~ 1))
table(waves$JDDamageProperty)
# Used a weapon in a fight:
waves <- waves %>%
mutate(JDWeaponFight = case_when(
H1JO26 %in% c(6, 8, 9) ~ NaN,
H1JO26 == 0 ~ 0,
H1JO26 == 1 ~ 1))
table(waves$JDWeaponFight)
# Hurt Someone Badly Enough past 12 months:
waves <- waves %>%
mutate(JDHurtBadly = case_when(
H1DS6 %in% c(6, 8, 9) ~ NaN,
H1DS6 == 0 ~ 0,
H1DS6 %in% c(1, 2, 3) ~ 1))
table(waves$JDHurtBadly)
# Paint graffiti past 12 months:
waves <- waves %>%
mutate(JDGraffitPaint = case_when(
H1DS1 %in% c(6, 8, 9) ~ NaN,
H1DS1 == 0 ~ 0,
H1DS1 %in% c(1, 2, 3) ~ 1))
table(waves$JDGraffitPaint)
"Juvenile Incarceration:"
# 0 = No
# 1 = Yes
# NA = Missing/NA
waves <- waves %>%
mutate(JIncarceration = case_when(
H4CJ5 %in% c(996, 998) ~ NaN,
H4CJ5 == 997 ~ 0,
H4CJ5 %in% seq(1, 95) ~ 1))
table(waves$JIncarceration)
table(is.na(waves$JIncarceration))
"Adult Incarceration"
# 0 = No
# 1 = Yes
# NA = Missing/NA
waves <- waves %>%
mutate(AIncarceration = case_when(
is.na(H4CJ6) ~ NaN,
H4CJ6 %in% c(96, 98) ~ NaN,
H4CJ6 == 97 ~ 0,
H4CJ6 %in% seq(1,90) ~ 1))
table(waves$AIncarceration)
table(is.na(waves$AIncarceration))
#########################
variables <- as.data.frame(names(waves))
#########################
"Select only the necessary variables:"
attach(waves)
Waves <- waves %>%
select(AID, H1GI1Y,
PEducation, Race, Black, Asian, Age, Geography, Gender, Gender.Coded, Hispanic, Citizenship,
EverSuspend, Divorce, JIncarceration, AIncarceration, FirstIncarcAge, TwoParentHome,
P1Education, P2Education, SES, JIncarceMonths, AIncarceMonths, AEmployed,
MotherEmployed, FatherEmployed, Unemployment, MotherHoursWeek, FatherHoursWeek,
MotherOvertime, FatherOvertime, W1Grade, W1GradeLevel, W2Grade, W2GradeLevel,
MiddleDropout, HighDropout, FamilySize, Death, HighestGrade, HighGrade15,
SuspendGrade, ESuspend, MSuspend, HSuspend, Expel, ADPhysicalFight, ADKnifeGun,
ADShootStab, ADWeaponSchool, NADLying, NADShoplift,
NADStealLess, NADStealMore, AtPCloseMother,
AtPCloseFather, AtPMotherCare, AtPFatherCare,
AtSClose, AtSHappy, AtSPartOf, AtSFairly,
AtDPCigs, AtDPAlcohol, AtDPWeed, APEnglish,
APMath, APHistory, APScience, AggDelinq,
NonAggDelinq, AttachParents, AtDelinqPeers, AcadPerform,
JVictim, AVictim, Victim, CantPayBills, BasicNeeds, HomeAlone, SlapHitKick,
Touched, HurtFeelings, BioFatherJail, BioMotherJail, FigFatherJail, FigMotherJail,
BingeDrink, Trauma, Homeless, AStealMore, AStealLess, AStealProperty, ADamageProperty,
AShootStab, APhysicalFight, AKnifeGun, ASellDrugs, FosterHome,
JDDriveDrunk, JDDriveHigh, JDSellDrugs, JDIllegalDrugUse, JDCocaineUse, JDIllegalDrugNeedle,
JDAloneDrugUse, JDFightOnDrugs, JDWeaponOnDrugs, JDStealLess, JDStealMore, JDStealStore,
JDKnifeGun, JDShootStab, JDLying, JDPhysicalFight, JDSeriousPhysicalFight, JDDamageProperty,
JDWeaponFight, JDHurtBadly, JDGraffitPaint)
"Rename some of the variables:"
#New = Old
Waves <- Waves %>%
rename(BirthYear = H1GI1Y)
attach(Waves)
names(Waves)
vars <- data.frame(names(Waves))
library(lavaan)
MODEL <-
"
STEALING =~ JDStealLess + JDStealMore + JDStealStore
DRUGS =~ JDDriveHigh + JDSellDrugs
"
fit <- cfa(MODEL, data=waves, std.lv=TRUE)
rm(wave1)
rm(wave2)
rm(wave3)
rm(wave4)
rm(test)
MODEL <-
"
STEALING =~ JDStealLess + JDStealMore + JDStealStore
DRUGS =~ JDDriveHigh + JDSellDrugs
"
fit <- cfa(MODEL, data=Waves, std.lv=TRUE)
summary(fit, fit.measures=TRUE, standardized=TRUE)
table(waves$JDDriveDrunk)
table(waves$JDDriveHigh)
table(waves$JDSellDrugs)
table(waves$JDIllegalDrugUse)
table(is.na(waves$JDIllegalDrugUse))
table(is.na(waves$H1TO35))
table(waves$JDWeaponOnDrugs)
table(waves$JDFightOnDrugs)
table(waves$JDAloneDrugUse)
table(waves$JDAloneDrugUse)
table(waves$JDIllegalDrugNeedle)
